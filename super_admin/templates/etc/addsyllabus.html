<<<<<<< HEAD
{% extends 'admin.html' %}

{% block head %}
<style>
  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }

  html {
    height: -webkit-fill-available;
  }

  main {
    display: flex;
    flex-wrap: nowrap;
    height: -webkit-fill-available;
    overflow-x: auto;
    overflow-y: hidden;
  }

  .b-example-divider {
    flex-shrink: 0;
    width: 1.5rem;
    height: 100vh;
    background-color: rgba(0, 0, 0, .1);
    border: solid rgba(0, 0, 0, .15);
    border-width: 1px 0;
    box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
  }

  .bi {
    vertical-align: -.125em;
    pointer-events: none;
    fill: currentColor;
  }

  .dropdown-toggle {
    outline: 0;
  }

  .nav-flush .nav-link {
    border-radius: 0;
  }

  .btn-toggle {
    display: inline-flex;
    align-items: center;
    padding: .25rem .5rem;
    font-weight: 600;
    color: rgba(0, 0, 0, .65);
    background-color: transparent;
    border: 0;
  }

  .btn-toggle:hover,
  .btn-toggle:focus {
    color: rgba(0, 0, 0, .85);
    background-color: #d2f4ea;
  }

  .btn-toggle::before {
    width: 1.25em;
    line-height: 0;
    content: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='rgba%280,0,0,.5%29' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 14l6-6-6-6'/%3e%3c/svg%3e");
    transition: transform .35s ease;
    transform-origin: .5em 50%;
  }

  .btn-toggle[aria-expanded="true"] {
    color: rgba(0, 0, 0, .85);
  }

  .btn-toggle[aria-expanded="true"]::before {
    transform: rotate(90deg);
  }

  .btn-toggle-nav a {
    display: inline-flex;
    padding: .1875rem .5rem;
    margin-top: .125rem;
    margin-left: 1.25rem;
    text-decoration: none;
  }

  .btn-toggle-nav a:hover,
  .btn-toggle-nav a:focus {
    background-color: #d2f4ea;
  }



  .fw-semibold {
    font-weight: 600;
  }

  .lh-tight {
    line-height: 1.25;
  }

  .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }

  @media (min-width: 768px) {
    .bd-placeholder-img-lg {
      font-size: 3.5rem;
    }
  }

  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;

  }

  body {
    min-height: 100vh;
  }

  .wrapper {
    max-width: 1200px;
    margin: 0px auto;
    padding: 30px 45px;
    box-shadow: 5px 25px 35px #3535356b
  }

  .form {
    margin: 50px;
  }
</style>
{% endblock head %}


{% block nav %}
<header>
  <!-- Sidebar -->
  <nav id="sidebarMenu" class="collapse d-lg-block sidebar  bg-white">
    <div class="position-sticky">
      <div class="list-group list-group-flush mx-3 mt-4">
        <a href="{% url 'overview' %}" class="list-group-item list-group-item-action py-2 ripple" aria-current="true">
          <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Dashboard</span>
        </a>


        <ul class="list-unstyled ps-0">
          <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active" data-bs-toggle="collapse"
              data-bs-target="#dashboard-collapse" aria-expanded="true">
              <i class="fas fa-users-cog fa-fw me-3"></i><span>Stud Management</span>
            </button>
            <div class="collapse" id="dashboard-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li><a href="{% url 'addstudent' %}" class="link-dark rounded">Student Registration</a></li>
                <li><a href="{% url 'quickaddstudent' %}" class="link-dark rounded">Quick Registration</a></li>
                <li><a href="{% url 'additionaldetail' %}" class="link-dark rounded">Additional Details</a></li>
                <li><a href="{% url 'advancesearch' %}" class="link-dark rounded">Advanced Search</a></li>
                <li><a href="{% url 'pendingverification' %}" class="link-dark rounded">Pending Student Verification</a></li>
                <li><a href="{% url 'registered' %}" class="link-dark rounded">Registered Student</a></li>
                <li><a href="{% url 'cancelledstudents' %}" class="link-dark rounded">Cancelled Student</a></li>
              </ul>
            </div>
          </li>
        </ul>
        <ul class="list-unstyled ps-0">
          <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active" data-bs-toggle="collapse"
              data-bs-target="#course-collapse" aria-expanded="true">
              <i class="fas fa-users-cog fa-fw me-3"></i><span>My Course/Subject</span>
            </button>
            <div class="collapse" id="course-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li><a href="{% url 'addcourse' %}" class="link-dark rounded">My Course</a></li>
                <li><a href="{% url 'addstream' %}" class="link-dark rounded">My Subject</a></li>
                <li><a href="{% url 'adduniversity' %}" class="link-dark rounded">My University</a></li>
                <li><a href="{% url 'addsyllabus' %}" class="link-dark rounded">Stream Syllabus</a></li>
              </ul>
            </div>
          </li>
        </ul>
        
        <ul class="list-unstyled ps-0">
            <li class="">
                <button class="list-group-item list-group-item-action py-2 ripple active"
                    data-bs-toggle="collapse" data-bs-target="#miscelanous-collapse" aria-expanded="true">
                    <i class="fas fa-users-cog fa-fw me-3"></i><span>Miscelanous</span>
                </button>
                <div class="collapse" id="miscelanous-collapse">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                        <li><a href="{% url 'usercreation' %}" class="link-dark rounded">User Creation</a></li>
                        <li><a href="{% url 'printaddress' %}" class="link-dark rounded">Print Address</a></li>
                        
                    </ul>
                </div>
            </li>
        </ul>
        <ul class="list-unstyled ps-0">
          <li class="">
              <button class="list-group-item list-group-item-action py-2 ripple active"
                  data-bs-toggle="collapse" data-bs-target="#fees-collapse" aria-expanded="true">
                  <i class="fas fa-users-cog fa-fw me-3"></i><span>Fees</span>
              </button>
              <div class="collapse" id="fees-collapse">
                  <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <li><a href="{% url 'addfees' %}" class="link-dark rounded">Course Fees</a></li>
                      <li><a href="{% url 'editoldfees' %}" class="link-dark rounded">Student Fees</a></li>
                  </ul>
              </div>
          </li>
      </ul>

      <ul class="list-unstyled ps-0">
        <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active"
                data-bs-toggle="collapse" data-bs-target="#examination-collapse" aria-expanded="true">
                <i class="fas fa-edit fa-fw me-3"></i><span>Examination</span>
            </button>
            <div class="collapse" id="examination-collapse">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                    <li><a href="{% url 'setexamination' %}" class="link-dark rounded">Set Exam</a></li>
                    <li><a href="{% url 'checkresult' %}" class="link-dark rounded">Student Fees</a></li>
                </ul>
            </div>
        </li>
    </ul>
        
        <a href="{% url 'sendemail' %}" class="list-group-item list-group-item-action py-2 ripple"
                    aria-current="true">
                    <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Send Email</span>
                </a>


        <a href="{% url 'logout' %}" class="list-group-item list-group-item-action py-2 ripple"><i
          class="fas fa-sign-out-alt fa-fw me-3"></i><span>Logout</span></a>

      </div>
    </div>
  </nav>
  <!-- Sidebar -->

  <!-- Navbar -->
  <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <!-- Container wrapper -->
    <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
            aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Brand -->
        <a class="navbar-brand" href="#">
            <img src="" height="25" alt="" loading="lazy" />
        </a>
        <!-- Search form -->
        <form class="d-none d-md-flex input-group w-auto my-auto">
            <input autocomplete="off" type="search" class="form-control rounded" placeholder='Search'
                style="min-width: 225px" />
            <span class="input-group-text border-0"><i class="fas fa-search"></i></span>
        </form>

        <!-- Right links -->
        <ul class="navbar-nav ms-auto d-flex flex-row">
            

            <li class="nav-item dropdown">
                <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-bell"></i>
                    <span class="badge rounded-pill badge-notification bg-danger">1</span>
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>

           

            <!-- Avatar -->
            <li class="nav-item dropdown">
               
                <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://mdbootstrap.com/img/Photos/Avatars/img (31).jpg" class="rounded-circle"
                        height="22" alt="" loading="lazy" />
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">My profile</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <!-- Container wrapper -->
</nav>
  <!-- Navbar -->
</header>
{% endblock nav%}


{% block body %}
{% if display == "yes" %}


<div class="container">
    <div class="row">
        <div class="col-sm-3">
          <label for="university" class="form-label">University</label>
          <select class="form-select" name="university" id="university" aria-label="Default select example"
              style="margin-top: -10px;">
              <option selected>Select University</option>
              {% for i in university %}
              <option value="{{i.registrationID}}">{{i.university_name}}</option>
              {% endfor %}
          </select>
        </div>
        <div class="col-sm-3">
            <label for="course" class="form-label">Course</label>
            <select class="form-select" name="course" id="course" aria-label="Default select example"
                style="margin-top: -10px;">
                <option selected>Select Course</option>
                
            </select>
        </div>
        <div class="col-sm-3">
            <div class="mb-3">
                <label for="Stream" class="form-label">Stream</label>
                <select class="form-select" name="Stream" id="Stream" aria-label="Default select example"
                    style="margin-top: -10px;">
                    


                </select>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="mb-3">
                <label for="semester" class="form-label">Semester</label>
                <select class="form-select" name="semester" id="semester" aria-label="Default select example"
                    style="margin-top: -10px;">
                    
                </select>
            </div>
        </div>
        <div class="col-sm-3">
            
        </div>
    </div>
    <div class="row">
        
        <div class="col-sm-3">
            <button class="btn btn-success" onclick="GetData()">Get</button>
        </div>
    </div>
    <div class="main" id="hiddendata" style="visibility: hidden;">
      <hr>
      <div class="row">
        <div class="col-sm-2">
          <div class="mb-3">
            <h2>Syllabus</h2>
          </div>
        </div>
        <div class="col-sm-3" id="view_button">

        </div>
      </div>
      <div class="row" id="savebutton">
        <div class="col-sm-3">
          <div class="mb-3">
            <button class="btn btn-primary" onclick="saveSyllabus()">Save</button>
          </div>
        </div>
      </div>
      <div class="row" id="updatebutton" style="visibility: hidden">
        <div class="col-sm-3">
          <div class="mb-3">
            <button class="btn btn-primary" onclick="updateSyllabus()" >Update</button>
          </div>
        </div>
      </div>
      
    </div>
</div>








{% else %}
<h1 class="text-center">Restricted</h1>
{% endif %}

<script  type="text/javascript">
  document.getElementById("university").onchange = function () {
    var university = this.value;
    if(university == "Select University"){

    }
    else{
      $.ajax({ // create an AJAX call...
            type: "GET",
            url: "{% url 'addstudent' %}",
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            data: {
              'get_course':university
            },
            success: function(response) {
              console.log(response)
              if(response.course){
                $('#course').empty();
                $('#course').append(`
                    <option>Select Course</option>
                  `);
                var data = response.course
                data.forEach(myFunction);

                function myFunction(item){
                  $('#course').append(`
                    <option value="${item.id}">${item.name}</option>
                  `);
                }

              }
            }
          });
          
    }
}
    document.getElementById("course").onchange = function () {
            var coursename = this.value;
            $.ajax({
                type: "POST",
                url: "{% url 'addsyllabus' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    'data': coursename // from form
    
                },
                success: function (response) {
                    $('#semester').empty();
                    console.log(response);
                    var data = response.stream
                    // console.log("data",data)
                    var duration = ''
                    $('#Stream').empty();
                    data.forEach(myFunction);
                    $('#Stream').append('<option Selected> Select Stream </option>');
                    function myFunction(item) {
                    duration = item.sem
                    $('#Stream').append('<option value=' + item.id + '>' + item.name + '</option>');
                    }
                    document.getElementById("Stream").onchange = function () {
                    $('#semester').empty();
                    var coursename = $('#course').val();
                    var streamname = this.value;
                    var streamarray = response.stream;
                    streamarray.forEach(SearchFunction);
                    function SearchFunction(item){
                        if(item.id == streamname){
                            var semesters = item.sem * 2;
                            for(var i=1;i<=semesters;i++){
                                $('#semester').append('<option value=' + i + '> Semester ' + i + '</option>');
                            }
                        }

                    }
                    }
                }
            });
        }



function GetData(){
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();

      $.ajax({
              type: "POST",
              url: "{% url 'addsyllabus' %}",
              headers: { 'X-CSRFToken': '{{ csrf_token }}' },
              data: {
                  'course_id': course_id,
                  'stream_id': stream_id,
                  'semester': semester
                  
  
              },
              success: function (response) {
                console.log(response)
                $('#hiddendata').css('visibility','visible')
                $('#view_button').empty();
                  var data = response.syllabus;
                  console.log(data)
                  if(data == "na"){
                    $('#view_button').append(`<input class="form-control" type="file" id="pdf">`);
                  }
                  else if(data == "yes"){
                    $('#view_button').append(`<a href="${response.data.pdf}" class="btn btn-success" target="_blank">View</a>`);
                    $('#savebutton').empty();
                    $('#savebutton').append(`
                    
                    <div class="col-sm-2">
                      <div class="mb-3">
                        <h2>Update</h2>
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="mb-3">
                        <input class="form-control" type="file" id="updatepdf">
                      </div>
                    </div>
                    
                    
                    `);
                    $('#updatebutton').css('visibility','visible');
                  }
              }
          });
    
}


function saveSyllabus(){
  console.log("save")
  if($('#pdf').val()){
    var data = new FormData();
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();
    data.append("c_id", $('#course').val());
    data.append("s_id", $('#Stream').val());
    data.append("sem", $('#semester').val());
    data.append("pdf", $('#pdf')[0].files[0]);
    data.append("csrfmiddlewaretoken", "{{ csrf_token }}");
    $.ajax({
      method: "POST",
      url: "{% url 'addsyllabus' %}",
      processData: false,
      contentType: false,
      mimeType: "multipart/form-data",
      data: data,
      success: function (res) {
        window.location = "{% url 'addsyllabus' %}"
      }
    });
    
  }
}


function updateSyllabus(){
  console.log("Update")
  if($('#updatepdf').val()){
    var data = new FormData();
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();
    data.append("uc_id", $('#course').val());
    data.append("us_id", $('#Stream').val());
    data.append("usem", $('#semester').val());
    data.append("updf", $('#updatepdf')[0].files[0]);
    data.append("csrfmiddlewaretoken", "{{ csrf_token }}");
    $.ajax({
      method: "POST",
      url: "{% url 'addsyllabus' %}",
      processData: false,
      contentType: false,
      mimeType: "multipart/form-data",
      data: data,
      success: function (res) {

        window.location = "{% url 'addsyllabus' %}"
      }
    });
    
  }
}
</script>



=======
{% extends 'admin.html' %}

{% block head %}
<style>
  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }

  html {
    height: -webkit-fill-available;
  }

  main {
    display: flex;
    flex-wrap: nowrap;
    height: -webkit-fill-available;
    overflow-x: auto;
    overflow-y: hidden;
  }

  .b-example-divider {
    flex-shrink: 0;
    width: 1.5rem;
    height: 100vh;
    background-color: rgba(0, 0, 0, .1);
    border: solid rgba(0, 0, 0, .15);
    border-width: 1px 0;
    box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
  }

  .bi {
    vertical-align: -.125em;
    pointer-events: none;
    fill: currentColor;
  }

  .dropdown-toggle {
    outline: 0;
  }

  .nav-flush .nav-link {
    border-radius: 0;
  }

  .btn-toggle {
    display: inline-flex;
    align-items: center;
    padding: .25rem .5rem;
    font-weight: 600;
    color: rgba(0, 0, 0, .65);
    background-color: transparent;
    border: 0;
  }

  .btn-toggle:hover,
  .btn-toggle:focus {
    color: rgba(0, 0, 0, .85);
    background-color: #d2f4ea;
  }

  .btn-toggle::before {
    width: 1.25em;
    line-height: 0;
    content: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='rgba%280,0,0,.5%29' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 14l6-6-6-6'/%3e%3c/svg%3e");
    transition: transform .35s ease;
    transform-origin: .5em 50%;
  }

  .btn-toggle[aria-expanded="true"] {
    color: rgba(0, 0, 0, .85);
  }

  .btn-toggle[aria-expanded="true"]::before {
    transform: rotate(90deg);
  }

  .btn-toggle-nav a {
    display: inline-flex;
    padding: .1875rem .5rem;
    margin-top: .125rem;
    margin-left: 1.25rem;
    text-decoration: none;
  }

  .btn-toggle-nav a:hover,
  .btn-toggle-nav a:focus {
    background-color: #d2f4ea;
  }



  .fw-semibold {
    font-weight: 600;
  }

  .lh-tight {
    line-height: 1.25;
  }

  .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }

  @media (min-width: 768px) {
    .bd-placeholder-img-lg {
      font-size: 3.5rem;
    }
  }

  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;

  }

  body {
    min-height: 100vh;
  }

  .wrapper {
    max-width: 1200px;
    margin: 0px auto;
    padding: 30px 45px;
    box-shadow: 5px 25px 35px #3535356b
  }

  .form {
    margin: 50px;
  }
</style>
{% endblock head %}


{% block nav %}
<header>
  <!-- Sidebar -->
  <nav id="sidebarMenu" class="collapse d-lg-block sidebar  bg-white">
    <div class="position-sticky">
      <div class="list-group list-group-flush mx-3 mt-4">
        <a href="{% url 'overview' %}" class="list-group-item list-group-item-action py-2 ripple" aria-current="true">
          <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Dashboard</span>
        </a>


        <ul class="list-unstyled ps-0">
          <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active" data-bs-toggle="collapse"
              data-bs-target="#dashboard-collapse" aria-expanded="true">
              <i class="fas fa-users-cog fa-fw me-3"></i><span>Stud Management</span>
            </button>
            <div class="collapse" id="dashboard-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li><a href="{% url 'addstudent' %}" class="link-dark rounded">Student Registration</a></li>
                <li><a href="{% url 'quickaddstudent' %}" class="link-dark rounded">Quick Registration</a></li>
                <li><a href="{% url 'additionaldetail' %}" class="link-dark rounded">Additional Details</a></li>
                <li><a href="{% url 'advancesearch' %}" class="link-dark rounded">Advanced Search</a></li>
                <li><a href="{% url 'pendingverification' %}" class="link-dark rounded">Pending Student Verification</a></li>
                <li><a href="{% url 'registered' %}" class="link-dark rounded">Registered Student</a></li>
                <li><a href="{% url 'cancelledstudents' %}" class="link-dark rounded">Cancelled Student</a></li>
              </ul>
            </div>
          </li>
        </ul>
        <ul class="list-unstyled ps-0">
          <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active" data-bs-toggle="collapse"
              data-bs-target="#course-collapse" aria-expanded="true">
              <i class="fas fa-users-cog fa-fw me-3"></i><span>My Course/Subject</span>
            </button>
            <div class="collapse" id="course-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li><a href="{% url 'addcourse' %}" class="link-dark rounded">My Course</a></li>
                <li><a href="{% url 'addstream' %}" class="link-dark rounded">My Subject</a></li>
                <li><a href="{% url 'adduniversity' %}" class="link-dark rounded">My University</a></li>
                <li><a href="{% url 'addsyllabus' %}" class="link-dark rounded">Stream Syllabus</a></li>
              </ul>
            </div>
          </li>
        </ul>
        
        <ul class="list-unstyled ps-0">
            <li class="">
                <button class="list-group-item list-group-item-action py-2 ripple active"
                    data-bs-toggle="collapse" data-bs-target="#miscelanous-collapse" aria-expanded="true">
                    <i class="fas fa-users-cog fa-fw me-3"></i><span>Miscelanous</span>
                </button>
                <div class="collapse" id="miscelanous-collapse">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                        <li><a href="{% url 'usercreation' %}" class="link-dark rounded">User Creation</a></li>
                        <li><a href="{% url 'printaddress' %}" class="link-dark rounded">Print Address</a></li>
                        
                    </ul>
                </div>
            </li>
        </ul>
        <ul class="list-unstyled ps-0">
          <li class="">
              <button class="list-group-item list-group-item-action py-2 ripple active"
                  data-bs-toggle="collapse" data-bs-target="#fees-collapse" aria-expanded="true">
                  <i class="fas fa-users-cog fa-fw me-3"></i><span>Fees</span>
              </button>
              <div class="collapse" id="fees-collapse">
                  <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <li><a href="{% url 'addfees' %}" class="link-dark rounded">Course Fees</a></li>
                      <li><a href="{% url 'editoldfees' %}" class="link-dark rounded">Student Fees</a></li>
                  </ul>
              </div>
          </li>
      </ul>

      <ul class="list-unstyled ps-0">
        <li class="">
            <button class="list-group-item list-group-item-action py-2 ripple active"
                data-bs-toggle="collapse" data-bs-target="#examination-collapse" aria-expanded="true">
                <i class="fas fa-edit fa-fw me-3"></i><span>Examination</span>
            </button>
            <div class="collapse" id="examination-collapse">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                    <li><a href="{% url 'setexamination' %}" class="link-dark rounded">Set Exam</a></li>
                    <li><a href="{% url 'checkresult' %}" class="link-dark rounded">Student Fees</a></li>
                </ul>
            </div>
        </li>
    </ul>
        
        <a href="{% url 'sendemail' %}" class="list-group-item list-group-item-action py-2 ripple"
                    aria-current="true">
                    <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Send Email</span>
                </a>


        <a href="{% url 'logout' %}" class="list-group-item list-group-item-action py-2 ripple"><i
          class="fas fa-sign-out-alt fa-fw me-3"></i><span>Logout</span></a>

      </div>
    </div>
  </nav>
  <!-- Sidebar -->

  <!-- Navbar -->
  <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <!-- Container wrapper -->
    <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
            aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Brand -->
        <a class="navbar-brand" href="#">
            <img src="" height="25" alt="" loading="lazy" />
        </a>
        <!-- Search form -->
        <form class="d-none d-md-flex input-group w-auto my-auto">
            <input autocomplete="off" type="search" class="form-control rounded" placeholder='Search'
                style="min-width: 225px" />
            <span class="input-group-text border-0"><i class="fas fa-search"></i></span>
        </form>

        <!-- Right links -->
        <ul class="navbar-nav ms-auto d-flex flex-row">
            

            <li class="nav-item dropdown">
                <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-bell"></i>
                    <span class="badge rounded-pill badge-notification bg-danger">1</span>
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>

           

            <!-- Avatar -->
            <li class="nav-item dropdown">
               
                <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://mdbootstrap.com/img/Photos/Avatars/img (31).jpg" class="rounded-circle"
                        height="22" alt="" loading="lazy" />
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">My profile</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <!-- Container wrapper -->
</nav>
  <!-- Navbar -->
</header>
{% endblock nav%}


{% block body %}
{% if display == "yes" %}


<div class="container">
    <div class="row">
        <div class="col-sm-3">
          <label for="university" class="form-label">University</label>
          <select class="form-select" name="university" id="university" aria-label="Default select example"
              style="margin-top: -10px;">
              <option selected>Select University</option>
              {% for i in university %}
              <option value="{{i.registrationID}}">{{i.university_name}}</option>
              {% endfor %}
          </select>
        </div>
        <div class="col-sm-3">
            <label for="course" class="form-label">Course</label>
            <select class="form-select" name="course" id="course" aria-label="Default select example"
                style="margin-top: -10px;">
                <option selected>Select Course</option>
                
            </select>
        </div>
        <div class="col-sm-3">
            <div class="mb-3">
                <label for="Stream" class="form-label">Stream</label>
                <select class="form-select" name="Stream" id="Stream" aria-label="Default select example"
                    style="margin-top: -10px;">
                    


                </select>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="mb-3">
                <label for="semester" class="form-label">Semester</label>
                <select class="form-select" name="semester" id="semester" aria-label="Default select example"
                    style="margin-top: -10px;">
                    
                </select>
            </div>
        </div>
        <div class="col-sm-3">
            
        </div>
    </div>
    <div class="row">
        
        <div class="col-sm-3">
            <button class="btn btn-success" onclick="GetData()">Get</button>
        </div>
    </div>
    <div class="main" id="hiddendata" style="visibility: hidden;">
      <hr>
      <div class="row">
        <div class="col-sm-2">
          <div class="mb-3">
            <h2>Syllabus</h2>
          </div>
        </div>
        <div class="col-sm-3" id="view_button">

        </div>
      </div>
      <div class="row" id="savebutton">
        <div class="col-sm-3">
          <div class="mb-3">
            <button class="btn btn-primary" onclick="saveSyllabus()">Save</button>
          </div>
        </div>
      </div>
      <div class="row" id="updatebutton" style="visibility: hidden">
        <div class="col-sm-3">
          <div class="mb-3">
            <button class="btn btn-primary" onclick="updateSyllabus()" >Update</button>
          </div>
        </div>
      </div>
      
    </div>
</div>








{% else %}
<h1 class="text-center">Restricted</h1>
{% endif %}

<script  type="text/javascript">
  document.getElementById("university").onchange = function () {
    var university = this.value;
    if(university == "Select University"){

    }
    else{
      $.ajax({ // create an AJAX call...
            type: "GET",
            url: "{% url 'addstudent' %}",
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            data: {
              'get_course':university
            },
            success: function(response) {
              console.log(response)
              if(response.course){
                $('#course').empty();
                $('#course').append(`
                    <option>Select Course</option>
                  `);
                var data = response.course
                data.forEach(myFunction);

                function myFunction(item){
                  $('#course').append(`
                    <option value="${item.id}">${item.name}</option>
                  `);
                }

              }
            }
          });
          
    }
}
    document.getElementById("course").onchange = function () {
            var coursename = this.value;
            $.ajax({
                type: "POST",
                url: "{% url 'addsyllabus' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    'data': coursename // from form
    
                },
                success: function (response) {
                    $('#semester').empty();
                    console.log(response);
                    var data = response.stream
                    // console.log("data",data)
                    var duration = ''
                    $('#Stream').empty();
                    data.forEach(myFunction);
                    $('#Stream').append('<option Selected> Select Stream </option>');
                    function myFunction(item) {
                    duration = item.sem
                    $('#Stream').append('<option value=' + item.id + '>' + item.name + '</option>');
                    }
                    document.getElementById("Stream").onchange = function () {
                    $('#semester').empty();
                    var coursename = $('#course').val();
                    var streamname = this.value;
                    var streamarray = response.stream;
                    streamarray.forEach(SearchFunction);
                    function SearchFunction(item){
                        if(item.id == streamname){
                            var semesters = item.sem * 2;
                            for(var i=1;i<=semesters;i++){
                                $('#semester').append('<option value=' + i + '> Semester ' + i + '</option>');
                            }
                        }

                    }
                    }
                }
            });
        }



function GetData(){
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();

      $.ajax({
              type: "POST",
              url: "{% url 'addsyllabus' %}",
              headers: { 'X-CSRFToken': '{{ csrf_token }}' },
              data: {
                  'course_id': course_id,
                  'stream_id': stream_id,
                  'semester': semester
                  
  
              },
              success: function (response) {
                console.log(response)
                $('#hiddendata').css('visibility','visible')
                $('#view_button').empty();
                  var data = response.syllabus;
                  console.log(data)
                  if(data == "na"){
                    $('#view_button').append(`<input class="form-control" type="file" id="pdf">`);
                  }
                  else if(data == "yes"){
                    $('#view_button').append(`<a href="${response.data.pdf}" class="btn btn-success" target="_blank">View</a>`);
                    $('#savebutton').empty();
                    $('#savebutton').append(`
                    
                    <div class="col-sm-2">
                      <div class="mb-3">
                        <h2>Update</h2>
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="mb-3">
                        <input class="form-control" type="file" id="updatepdf">
                      </div>
                    </div>
                    
                    
                    `);
                    $('#updatebutton').css('visibility','visible');
                  }
              }
          });
    
}


function saveSyllabus(){
  console.log("save")
  if($('#pdf').val()){
    var data = new FormData();
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();
    data.append("c_id", $('#course').val());
    data.append("s_id", $('#Stream').val());
    data.append("sem", $('#semester').val());
    data.append("pdf", $('#pdf')[0].files[0]);
    data.append("csrfmiddlewaretoken", "{{ csrf_token }}");
    $.ajax({
      method: "POST",
      url: "{% url 'addsyllabus' %}",
      processData: false,
      contentType: false,
      mimeType: "multipart/form-data",
      data: data,
      success: function (res) {
        window.location = "{% url 'addsyllabus' %}"
      }
    });
    
  }
}


function updateSyllabus(){
  console.log("Update")
  if($('#updatepdf').val()){
    var data = new FormData();
    var course_id = $('#course').val();
    var stream_id = $('#Stream').val();
    var semester = $('#semester').val();
    data.append("uc_id", $('#course').val());
    data.append("us_id", $('#Stream').val());
    data.append("usem", $('#semester').val());
    data.append("updf", $('#updatepdf')[0].files[0]);
    data.append("csrfmiddlewaretoken", "{{ csrf_token }}");
    $.ajax({
      method: "POST",
      url: "{% url 'addsyllabus' %}",
      processData: false,
      contentType: false,
      mimeType: "multipart/form-data",
      data: data,
      success: function (res) {

        window.location = "{% url 'addsyllabus' %}"
      }
    });
    
  }
}
</script>



>>>>>>> 0afb1a7cdc5b133066f85bb3be6fd7c58409a049
{% endblock body %}