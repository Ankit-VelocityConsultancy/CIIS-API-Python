<<<<<<< HEAD
{% extends 'includes/master.html' %}
{% load static %}
{% block head %}
<title>STUDENT FEES - CIIS</title>

{% endblock head %}


{% block nav %}

{% include 'sidebar.html' %}

{% endblock nav%}


{% block body %}
{% if request.user.is_superuser %}
<div class="student-fees">
    <section class="semester-fees ">
        <div class="outer-rectangle m-3">
            <div class="row">
                <div class="col-12">
                    <div class="section-header pt-3 px-3">
                        <h1 class="font-26 font-bold text-black text-uppercase">Search Student</h1>
    
                    </div>
                    
                        <div class=" select-padding ">
                            <div class="options  px-3 select-padding">
                                <div class="row">
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="enrollid" class="labelnotrequired">Enroll ID / Email / Mobile</label>
                                        <input type="text" name="enrollid" class="select-formatting font-bold font14 text-lightgray" id="enroll_id" placeholder="">
                                        
                                      
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="course" class="labelnotrequired">Course</label>
                                        <select name="course" id="course" class="session select-formatting font-14 font-bold text-lightgray">
                                            
                                            <option selected>Select</option>
                                            {% for i in course %}
                                            <option value="{{i.id}}">{{i.name}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="stream" class="labelnotrequired">Stream</label>
                                        <select name="stream" id="stream" class="session select-formatting font-14 font-bold text-lightgray">
                                            <option value="0">Select</option> </select>
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3" id="hideSubStream">
                                        <label for="substream" class="labelnotrequired">Sub Stream</label>
                                        <select name="substream" id="substream" class="session select-formatting font-14 font-bold text-lightgray">
                                            <option value="0">Select</option> </select>
                                    </div>
                                   
    
                                    
                                </div>
                            </div>
                        </div>
                 
                </div>
            </div>
           
        </div>
       

    </section>

    <div class="container">
        <div class="main">
          
      
           
            <div class="hiddendata" id="hiddendata" style="visibility: hidden;">
                <table class="table format-table details-table my-4" id="student-table">
                    <thead>
                        <tr>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Name</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Mobile</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Email</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Course</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Stream</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Sub Stream</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Total Semester/Year</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Current Semester/Year</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col"></th>
    
                        </tr>
                    </thead>
                    <tbody id="student-table-body">
    
                    </tbody>
                </table>
                <div id="errordata"></div>
            </div>
        </div>
        <div class="main_semester py-3" id="semesterhiddendata" style="visibility:hidden;">
    
        </div>
        <div class="main_year py-3" id="yearhiddendata" style="visibility:hidden;">
    
        </div>
    
    </div>
    <section class="semester-fees  ">
        <div class="outer-rectangle m-3">
            <div class="row">
                <div class="col-12">
                    <div class="section-header pt-3 px-3">
                        <h1 class="font-26 font-bold text-black text-uppercase">Search Student</h1>
    
                    </div>
                    
                        <div class=" select-padding px-3">
                            <div class="options  select-padding">
                                <div class="row">
                                    <div class="mt-4 col-12 mt-md-0 col-md-6">
                                        <label for="enrollid" class="labelnotrequired">Name</label>
                                        <input type="text" name="enrollid" class="select-formatting font-14 font-bold text-lightgray" id="name" placeholder="">
                                    </div>
                                    <div class="mt-4 col-12 col-md-6 mt-md-0">
                                        <button class=" edit-btn" onclick="Search()">Search</button>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    
                </div>
            </div>
        </div>
        
       

    </section>
  

    
</div>






{% else %}
<h1 class="text-center">Restricted</h1>
{% endif %}


<script language="JavaScript">
    $(document).ready( function () {
        $('#fees-collapse').addClass("show");
        $("#student_fees_link").removeClass("link-dark");
        $('#student_fees_link').addClass("link-primary");
        $('#hideSubStream').css('display', 'none');
} );
    $("#name").keypress(function(event) {
        
    if (event.which == 13) {
        console.log("Enter pressed")
        Search();
        }
    });
    function Search() {
        if ($('#enroll_id').val()) {
            $.ajax({ // create an AJAX call...
                data: {
                    'enroll_id': $('#enroll_id').val()
                }, // get the form data
                type: 'POST', // GET or POST
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}", // the file to call
                success: function (response) {
                    var data = response.student_data;
                    if (data == ''){
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        
                        data.forEach(myFunction);
                    }
                    data.forEach(myFunction);
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });

        }

        if ($('#name').val()) {
            $.ajax({ // create an AJAX call...
                data: {
                    'name': $('#name').val()
                }, // get the form data
                type: 'POST', // GET or POST
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}", // the file to call
                success: function (response) {
                    var data = response.student_data;
                    if (data == ''){
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        
                        data.forEach(myFunction);
                    }
                   
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });
        }

    }
    document.getElementById("course").onchange = function () {
        var courseid = this.value;
        $.ajax
            ({
                data: {
                    'courseid': courseid
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    $('#stream').empty();
                    $('#stream').append('<option selected>Select Stream</option>');
                    var data = response.stream;
                    data.forEach(myFunction);
                    function myFunction(item) {
                        duration = item.sem
                        $('#stream').append('<option value=' + item.id + '>' + item.name + '</option>');
                    }
                }
            });

    }
    document.getElementById("stream").onchange = function () {
        var stream = this.value;
        var course = $('#course').val();
       
        $.ajax
            ({
                data: {
                    'streamid': stream
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    if (response.substream.length > 0) {
                        $('#hideSubStream').css('display', 'block');
                        $('#substream').empty();
                        $('#substream').append('<option selected>Select Sub Stream</option>');
                        var data = response.substream;
                        data.forEach(myFunction);
                        function myFunction(item) {
                            duration = item.sem
                            $('#substream').append('<option value=' + item.id + '>' + item.name + '</option>');
                        }
                    }
                    else {
                        $('#hideSubStream').css('display', 'none');
                        $('#substream').empty();
                        fetchFeeDetails(course, stream, '');
                    }
                    fetchFeeDetails(course, stream, '');
                }
            });


        
    }
    document.getElementById('substream').onchange = function () {
        var course = $('#course').val();
        var stream = $('#stream').val();
        var substream = $('#substream').val();
        if (substream == 'Select Sub Stream')
            substream = '';
        fetchFeeDetails(course, stream, substream);
    }
    function fetchFeeDetails(course, stream, substream){
        $.ajax
            ({
                data: {
                    'course_id': course,
                    'stream_id': stream,
                    'substream_id': substream
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                   
                    console.log(response)
                    var data = response.student_data;
                    if (data == ''){
                        $('#errordata').empty();
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        data.forEach(myFunction);
                    }
                    
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });
    }
    function redirectpage(enroll_id) {
        $.ajax
            ({
                data: {
                    'getoldstudentfees_enroll_id': enroll_id
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    $('#semesterhiddendata').empty();
                    $('#yearhiddendata').empty();


                    $('#semesterhiddendata').css('visibility', 'hidden');

                    $('#yearhiddendata').css('visibility', 'hidden');

                    console.log(response)
                    if (response.studypattern == "Semester") {
                        $('#semesterhiddendata').append(`
                            <h2 class="font-22 text-darkblue font-bold">Semester Fees</h2>
                            <input type="text" id="total_semester" class="invisible"><input type="text" id="student_semester" class="invisible"><input type="text" id="stream_semester" class="invisible">
                            <div id="semester_output"></div>
                            <table class="table format-table details-table my-4" id="semester_table">
                                <thead id="thead_fees">
                                    
                                </thead>
                                <tbody id="tbody_fees">

                                </tbody>
                            </table>
                            <button class="save-btn width-20" onclick="semester_savestudentfees()">Save</button>
                            `);
                                    $('#thead_fees').append(`
                                <tr>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Semester</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Tution Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Examination Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">STUDY MATERIAL FEES</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Re-Sitting Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Entrance Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Additional Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Discount</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Total Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Calculate Discount</th>
                                    
                                </tr>
                        `);


                        $('#semesterhiddendata').css('visibility', 'visible')
                        $('#total_semester').val(response.count);
                        $('#student_semester').val(response.student)
                        $('#stream_semester').val($('#stream option:selected').val());
                        data = response.data
                        if (data.length != 0) {
                        data.forEach(myfunction1)
                        var count = 0
                        function myfunction1(item, count) {
                            count = count + 1
                            $('#tbody_fees').append(`
                        
                            <tr>
                                <th scope="row">Semester ${count}</th>
                                <td><input class="form-control txtCal${count}" id="tution${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="exam${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="book${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="resitting${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="entrance${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="extra${count}" /></td>
                                <td><input class="form-control" id="discount${count}" /></td>
                                <td><input class="form-control" id="total${count}" /></td>
                                <td> <button class="blue-bg text-blue font-bold font-12 no-border" onclick="CalculateDiscountSem(${count})" >Calculate </button> </td>
                            </tr>

                        `);
                            if (item.sem == "1") {
                                $('#tution1').val(item.tutionfees);
                                $('#exam1').val(item.examinationfees);
                                $('#book1').val(item.bookfees);
                                $('#resitting1').val(item.resittingfees);
                                $('#entrance1').val(item.entrancefees);
                                $('#extra1').val(item.extrafees);
                                $('#discount1').val(item.discount);
                                $('#total1').val(item.totalfees);
                            }
                            else if (item.sem == "2") {
                                $('#tution2').val(item.tutionfees);
                                $('#exam2').val(item.examinationfees);
                                $('#book2').val(item.bookfees);
                                $('#resitting2').val(item.resittingfees);
                                $('#entrance2').val(item.entrancefees);
                                $('#extra2').val(item.extrafees);
                                $('#discount2').val(item.discount);
                                $('#total2').val(item.totalfees);
                            }
                            else if (item.sem == "3") {
                                $('#tution3').val(item.tutionfees);
                                $('#exam3').val(item.examinationfees);
                                $('#book3').val(item.bookfees);
                                $('#resitting3').val(item.resittingfees);
                                $('#entrance3').val(item.entrancefees);
                                $('#extra3').val(item.extrafees);
                                $('#discount3').val(item.discount);
                                $('#total3').val(item.totalfees);
                            }
                            else if (item.sem == "4") {
                                $('#tution4').val(item.tutionfees);
                                $('#exam4').val(item.examinationfees);
                                $('#book4').val(item.bookfees);
                                $('#resitting4').val(item.resittingfees);
                                $('#entrance4').val(item.entrancefees);
                                $('#extra4').val(item.extrafees);
                                $('#discount4').val(item.discount);
                                $('#total4').val(item.totalfees);
                            }
                            else if (item.sem == "5") {
                                $('#tution5').val(item.tutionfees);
                                $('#exam5').val(item.examinationfees);
                                $('#book5').val(item.bookfees);
                                $('#resitting5').val(item.resittingfees);
                                $('#entrance5').val(item.entrancefees);
                                $('#extra5').val(item.extrafees);
                                $('#discount5').val(item.discount);
                                $('#total5').val(item.totalfees);
                            }
                            else if (item.sem == "6") {
                                $('#tution6').val(item.tutionfees);
                                $('#exam6').val(item.examinationfees);
                                $('#book6').val(item.bookfees);
                                $('#resitting6').val(item.resittingfees);
                                $('#entrance6').val(item.entrancefees);
                                $('#extra6').val(item.extrafees);
                                $('#discount6').val(item.discount);
                                $('#total6').val(item.totalfees);
                            }
                            else if (item.sem == "7") {
                                $('#tution7').val(item.tutionfees);
                                $('#exam7').val(item.examinationfees);
                                $('#book7').val(item.bookfees);
                                $('#resitting7').val(item.resittingfees);
                                $('#entrance7').val(item.entrancefees);
                                $('#extra7').val(item.extrafees);
                                $('#discount7').val(item.discount);
                                $('#total7').val(item.totalfees);
                            }
                            else if (item.sem == "8") {
                                $('#tution8').val(item.tutionfees);
                                $('#exam8').val(item.examinationfees);
                                $('#book8').val(item.bookfees);
                                $('#resitting8').val(item.resittingfees);
                                $('#entrance8').val(item.entrancefees);
                                $('#extra8').val(item.extrafees);
                                $('#discount8').val(item.discount);
                                $('#total8').val(item.totalfees);
                            }

                            $("#semester_table").on('input', '.txtCal1', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal1").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total1").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal2', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal2").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total2").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal3', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal3").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total3").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal4', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal4").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total4").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal5', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal5").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total5").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal6', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal6").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total6").val(calculated_total_sum);
                            });

                            $("#myTable").on('input', '.txtCal7', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal7").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total7").val(calculated_total_sum);
                            });
                            $("#myTable").on('input', '.txtCal8', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal8").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total8").val(calculated_total_sum);
                            });

                        }
                        }
                        else {
                            var total_semesters = response.sem * 2
                            $('#total_semester').val(total_semesters);
                            for(var i=1;i<=total_semesters;i++){
                                $('#tbody_fees').append(`
                                <tr>
                                    <th scope="row">Semester ${i}</th>
                                    <td><input class="form-control txtCal${count}" id="tution${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="exam${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="book${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="resitting${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="entrance${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="extra${count}" /></td>
                                    <td><input class="form-control" id="discount${count}" /></td>
                                    <td><input class="form-control" id="total${count}" /></td>
                                </tr>

                                `);
                                

                            }
                            $("#semester_table").on('input', '.txtCal1', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal1").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total1").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal2', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal2").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total2").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal3', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal3").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total3").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal4', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal4").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total4").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal5', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal5").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total5").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal6', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal6").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total6").val(calculated_total_sum);
                            });

                            $("#myTable").on('input', '.txtCal7', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal7").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total7").val(calculated_total_sum);
                            });
                            $("#myTable").on('input', '.txtCal8', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal8").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total8").val(calculated_total_sum);
                            });
                        }

                }

                    else if (response.studypattern == "Annual") {
                        $('#yearhiddendata').append(`
                            <h2>Annual Fees</h2>
                            <input type="text" id="total_year" style="visibility:hidden;"><input type="text" id="student_year" style="visibility:hidden;"><input type="text" id="stream_year" style="visibility:hidden;">
                            <div id="year_output"></div>
                            <table class="table" id="year_table">
                                <thead id="year_thead_fees">
                                    
                                </thead>
                                <tbody id="year_tbody_fees">

                                </tbody>
                            </table>
                            <button class="save-btn width-20" onclick="year_savestudentfees()">Save</button>
                            `);
                                    $('#year_thead_fees').append(`
                                <tr>
                                    <th scope="col">Year</th>
                                    <th scope="col">Tution Fees</th>
                                    <th scope="col">Examination Fees</th>
                                    <th scope="col">STUDY MATERIAL FEES</th>
                                    <th scope="col">Re-Sitting Fees</th>
                                    <th scope="col">Entrance Fees</th>
                                    <th scope="col">Additional Fees</th>
                                    <th scope="col">Discount</th>
                                    <th scope="col">Total Fees</th>
                                    <th scope="col">Calculate Discount</th> 
                                </tr>
                            `);


                        $('#yearhiddendata').css('visibility', 'visible')
                        $('#total_year').val(response.count);
                        $('#student_year').val(response.student)
                        $('#stream_year').val($('#stream option:selected').val());
                        data = response.data
                        if (data.length != 0) {
                            console.log("if statement")
                            data.forEach(myfunction1)
                            var count = 0
                            function myfunction1(item, count) {
                                count = count + 1
                                $('#year_tbody_fees').append(`
                        
                            <tr>
                                <th scope="row">Year ${count}</th>
                                <td><input class="form-control year_txtCal${count}" id="year_tution${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_exam${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_book${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_resitting${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_entrance${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_extra${count}" /></td>
                                <td><input class="form-control" id="year_discount${count}" /></td>
                                <td><input class="form-control" id="year_total${count}" /></td>
                                <td> <button class="blue-bg text-blue font-bold font-12 no-border" onclick="CalculateDiscountYear(${count})">Calculate</button> </td>
                            </tr>

                        `);
                                if (item.sem == "1") {
                                    $('#year_tution1').val(item.tutionfees);
                                    $('#year_exam1').val(item.examinationfees);
                                    $('#year_book1').val(item.bookfees);
                                    $('#year_resitting1').val(item.resittingfees);
                                    $('#year_entrance1').val(item.entrancefees);
                                    $('#year_extra1').val(item.extrafees);
                                    $('#year_discount1').val(item.discount);
                                    $('#year_total1').val(item.totalfees);
                                }
                                else if (item.sem == "2") {
                                    $('#year_tution2').val(item.tutionfees);
                                    $('#year_exam2').val(item.examinationfees);
                                    $('#year_book2').val(item.bookfees);
                                    $('#year_resitting2').val(item.resittingfees);
                                    $('#year_entrance2').val(item.entrancefees);
                                    $('#year_extra2').val(item.extrafees);
                                    $('#year_discount2').val(item.discount);
                                    $('#year_total2').val(item.totalfees);
                                }
                                else if (item.sem == "3") {
                                    $('#year_tution3').val(item.tutionfees);
                                    $('#year_exam3').val(item.examinationfees);
                                    $('#year_book3').val(item.bookfees);
                                    $('#year_resitting3').val(item.resittingfees);
                                    $('#year_entrance3').val(item.entrancefees);
                                    $('#year_extra3').val(item.extrafees);
                                    $('#year_discount3').val(item.discount);
                                    $('#year_total3').val(item.totalfees);
                                }
                                else if (item.sem == "4") {
                                    $('#year_tution4').val(item.tutionfees);
                                    $('#year_exam4').val(item.examinationfees);
                                    $('#year_book4').val(item.bookfees);
                                    $('#year_resitting4').val(item.resittingfees);
                                    $('#year_entrance4').val(item.entrancefees);
                                    $('#year_extra4').val(item.extrafees);
                                    $('#year_discount4').val(item.discount);
                                    $('#year_total4').val(item.totalfees);
                                }

                                


                                $("#year_table").on('input', '.year_txtCal1', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal1").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total1").val(calculated_total_sum);
                                    
                                });

                                $("#year_table").on('input', '.year_txtCal2', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal2").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total2").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_txtCal3', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal3").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total3").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_txtCal4', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal4").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total4").val(calculated_total_sum);
                                });


                            }
                        }
                        else {
                            console.log("else statement")
                            $('#total_year').val(response.sem);
                            for(var i=1;i<=response.sem;i++){
                                $('#year_tbody_fees').append(`
                                    <tr>
                                        <th scope="row">Year ${i}</th>
                                        <td><input class="form-control year_txtCal${i}" id="year_tution${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_exam${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_book${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_resitting${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_entrance${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_extra${i}" /></td>
                                        <td><input class="form-control" id="year_disi${i}" /></td>
                                        <td><input class="form-control" id="year_total${i}" /></td>
                                    </tr>

                                `);
                                

                            }
                            $("#year_table").on('input', '.year_textcal1', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal1").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total1").val(calculated_total_sum);
                                });

                                $("#year_table").on('input', '.year_textcal2', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal2").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total2").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_textcal3', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal3").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total3").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_textcal4', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal4").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total4").val(calculated_total_sum);
                                });
                        }
                    }


                }
            });

    }

    function CalculateDiscountSem(sem){
        if(sem == 1){
            // $('#tution1').val(item.tutionfees);
            // $('#exam1').val(item.examinationfees);
            // $('#book1').val(item.bookfees);
            // $('#resitting1').val(item.resittingfees);
            // $('#entrance1').val(item.entrancefees);
            // $('#extra1').val(item.extrafees);
            // $('#discount1').val(item.discount);
            // $('#total1').val(item.totalfees);
            
            var tution = parseInt($('#tution1').val());
            var exam = parseInt($('#exam1').val());
            var book = parseInt($('#book1').val());
            var resitting = parseInt($('#resitting1').val());
            var entrance = parseInt($('#entrance1').val());
            var extra = parseInt($('#extra1').val());
            var discount = parseInt($('#discount1').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total1').val(total);
        }
        else if(sem == 2){
            
            var tution = parseInt($('#tution2').val());
            var exam = parseInt($('#exam2').val());
            var book = parseInt($('#book2').val());
            var resitting = parseInt($('#resitting2').val());
            var entrance = parseInt($('#entrance2').val());
            var extra = parseInt($('#extra2').val());
            var discount = parseInt($('#discount2').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total2').val(total);
        }
        else if(sem == 3){
            
            var tution = parseInt($('#tution3').val());
            var exam = parseInt($('#exam3').val());
            var book = parseInt($('#book3').val());
            var resitting = parseInt($('#resitting3').val());
            var entrance = parseInt($('#entrance3').val());
            var extra = parseInt($('#extra3').val());
            var discount = parseInt($('#discount3').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total3').val(total);
        }
        else if(sem == 4){
            
            var tution = parseInt($('#tution4').val());
            var exam = parseInt($('#exam4').val());
            var book = parseInt($('#book4').val());
            var resitting = parseInt($('#resitting4').val());
            var entrance = parseInt($('#entrance4').val());
            var extra = parseInt($('#extra4').val());
            var discount = parseInt($('#discount4').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total4').val(total);
        }
        else if(sem == 5){
            
            var tution = parseInt($('#tution5').val());
            var exam = parseInt($('#exam5').val());
            var book = parseInt($('#book5').val());
            var resitting = parseInt($('#resitting5').val());
            var entrance = parseInt($('#entrance5').val());
            var extra = parseInt($('#extra5').val());
            var discount = parseInt($('#discount5').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total5').val(total);
        }
        else if(sem == 6){
            
            var tution = parseInt($('#tution6').val());
            var exam = parseInt($('#exam6').val());
            var book = parseInt($('#book6').val());
            var resitting = parseInt($('#resitting6').val());
            var entrance = parseInt($('#entrance6').val());
            var extra = parseInt($('#extra6').val());
            var discount = parseInt($('#discount6').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total6').val(total);
        }
        else if(sem == 7){
            
            var tution = parseInt($('#tution7').val());
            var exam = parseInt($('#exam7').val());
            var book = parseInt($('#book7').val());
            var resitting = parseInt($('#resitting7').val());
            var entrance = parseInt($('#entrance7').val());
            var extra = parseInt($('#extra7').val());
            var discount = parseInt($('#discount7').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total7').val(total);
        }
        else if(sem == 8){
            
            var tution = parseInt($('#tution8').val());
            var exam = parseInt($('#exam8').val());
            var book = parseInt($('#book8').val());
            var resitting = parseInt($('#resitting8').val());
            var entrance = parseInt($('#entrance8').val());
            var extra = parseInt($('#extra8').val());
            var discount = parseInt($('#discount8').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total8').val(total);
        }
        
    }  
    function CalculateDiscountYear(year){
        if(year == 1){
            var tution = parseInt($('#year_tution1').val());
            var exam = parseInt($('#year_exam1').val());
            var book = parseInt($('#year_book1').val());
            var resitting = parseInt($('#year_resitting1').val());
            var entrance = parseInt($('#year_entrance1').val());
            var extra = parseInt($('#year_extra1').val());
            var discount = parseInt($('#year_discount1').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total1').val(total);
            
        }
        else if(year == 2){
            var tution = parseInt($('#year_tution2').val());
            var exam = parseInt($('#year_exam2').val());
            var book = parseInt($('#year_book2').val());
            var resitting = parseInt($('#year_resitting2').val());
            var entrance = parseInt($('#year_entrance2').val());
            var extra = parseInt($('#year_extra2').val());
            var discount = parseInt($('#year_discount2').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total2').val(total);
        }
        else if(year == 3){
            var tution = parseInt($('#year_tution3').val());
            var exam = parseInt($('#year_exam3').val());
            var book = parseInt($('#year_book3').val());
            var resitting = parseInt($('#year_resitting3').val());
            var entrance = parseInt($('#year_entrance3').val());
            var extra = parseInt($('#year_extra3').val());
            var discount = parseInt($('#year_discount3').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total3').val(total);
        }
        else if(year == 4){
            var tution = parseInt($('#year_tution4').val());
            var exam = parseInt($('#year_exam4').val());
            var book = parseInt($('#year_book4').val());
            var resitting = parseInt($('#year_resitting4').val());
            var entrance = parseInt($('#year_entrance4').val());
            var extra = parseInt($('#year_extra4').val());
            var discount = parseInt($('#year_discount4').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total4').val(total);
        }
        
        
        
    } 


    function semester_savestudentfees(){
        var no_of_semester = $('#total_semester').val();
        var student = $('#student_semester').val();
        var stream_semester = $('#stream_semester').val();


        var tution1 = parseInt($('#tution1').val());
        var exam1 = parseInt($('#exam1').val());
        var book1 = parseInt($('#book1').val());
        var resitting1 = parseInt($('#resitting1').val());
        var entrance1 = parseInt($('#entrance1').val());
        var extra1 = parseInt($('#extra1').val());
        var discount1 = parseInt($('#discount1').val());
        var total1 = $('#total1').val();
        if(tution1){
                tution1 = tution1
            }
            else{
                tution1 = 0
            }
            if(exam1){
                exam1 = exam1
            }
            else{
                exam1 = 0
            }
            if(book1){
                book1 = book1
            }
            else{
                book1 = 0
            }
            if(resitting1){
                resitting1 = resitting1
            }
            else{
                resitting1 = 0
            }
            if(entrance1){
                entrance1 = entrance1
            }
            else{
                entrance1 = 0
            }
            if(extra1){
                extra1 = extra1
            }
            else{
                extra1 = 0
            }
            if(discount1){
                discount1 = discount1
            }
            else{
                discount1 = 0
            }

        var tution2 = parseInt($('#tution2').val());
        var exam2 = parseInt($('#exam2').val());
        var book2 = parseInt($('#book2').val());
        var resitting2 = parseInt($('#resitting2').val());
        var entrance2 = parseInt($('#entrance2').val());
        var extra2 = parseInt($('#extra2').val());
        var discount2 = parseInt($('#discount2').val());
        var total2 = $('#total2').val();
        if(tution2){
                tution2 = tution2
            }
            else{
                tution2 = 0
            }
            if(exam2){
                exam2 = exam2
            }
            else{
                exam2 = 0
            }
            if(book2){
                book2 = book2
            }
            else{
                book2 = 0
            }
            if(resitting2){
                resitting2 = resitting2
            }
            else{
                resitting2 = 0
            }
            if(entrance2){
                entrance2 = entrance2
            }
            else{
                entrance2 = 0
            }
            if(extra2){
                extra2 = extra2
            }
            else{
                extra2 = 0
            }
            if(discount2){
                discount2 = discount2
            }
            else{
                discount2 = 0
            }

        var tution3 = parseInt($('#tution3').val());
        var exam3 = parseInt($('#exam3').val());
        var book3 = parseInt($('#book3').val());
        var resitting3 = parseInt($('#resitting3').val());
        var entrance3 = parseInt($('#entrance3').val());
        var extra3 = parseInt($('#extra3').val());
        var discount3 = parseInt($('#discount3').val());
        var total3 = $('#total3').val();
        if(tution3){
                tution3 = tution3
            }
            else{
                tution3 = 0
            }
            if(exam3){
                exam3 = exam3
            }
            else{
                exam3 = 0
            }
            if(book3){
                book3 = book3
            }
            else{
                book3 = 0
            }
            if(resitting3){
                resitting3 = resitting3
            }
            else{
                resitting3 = 0
            }
            if(entrance3){
                entrance3 = entrance3
            }
            else{
                entrance3 = 0
            }
            if(extra3){
                extra3 = extra3
            }
            else{
                extra3 = 0
            }
            if(discount3){
                discount3 = discount3
            }
            else{
                discount3 = 0
            }

        var tution4 = parseInt($('#tution4').val());
        var exam4 = parseInt($('#exam4').val());
        var book4 = parseInt($('#book4').val());
        var resitting4 = parseInt($('#resitting4').val());
        var entrance4 = parseInt($('#entrance4').val());
        var extra4 = parseInt($('#extra4').val());
        var discount4 = parseInt($('#discount4').val());
        var total4 = $('#total4').val();
        if(tution4){
                tution4 = tution4
            }
            else{
                tution4 = 0
            }
            if(exam4){
                exam4 = exam4
            }
            else{
                exam4 = 0
            }
            if(book4){
                book4 = book4
            }
            else{
                book4 = 0
            }
            if(resitting4){
                resitting4 = resitting4
            }
            else{
                resitting4 = 0
            }
            if(entrance4){
                entrance4 = entrance4
            }
            else{
                entrance4 = 0
            }
            if(extra4){
                extra4 = extra4
            }
            else{
                extra4 = 0
            }
            if(discount4){
                discount4 = discount4
            }
            else{
                discount4 = 0
            }

        var tution5 = parseInt($('#tution5').val());
        var exam5 = parseInt($('#exam5').val());
        var book5 = parseInt($('#book5').val());
        var resitting5 = parseInt($('#resitting5').val());
        var entrance5 = parseInt($('#entrance5').val());
        var extra5 = parseInt($('#extra5').val());
        var discount5 = parseInt($('#discount5').val());
        var total5 = $('#total5').val();
        if(tution5){
                tution5 = tution5
            }
            else{
                tution5 = 0
            }
            if(exam5){
                exam5 = exam5
            }
            else{
                exam5 = 0
            }
            if(book5){
                book5 = book5
            }
            else{
                book5 = 0
            }
            if(resitting5){
                resitting5 = resitting5
            }
            else{
                resitting5 = 0
            }
            if(entrance5){
                entrance5 = entrance5
            }
            else{
                entrance5 = 0
            }
            if(extra5){
                extra5 = extra5
            }
            else{
                extra5 = 0
            }
            if(discount5){
                discount5 = discount5
            }
            else{
                discount5 = 0
            }

        var tution6 = parseInt($('#tution6').val());
        var exam6 = parseInt($('#exam6').val());
        var book6 = parseInt($('#book6').val());
        var resitting6 = parseInt($('#resitting6').val());
        var entrance6 = parseInt($('#entrance6').val());
        var extra6 = parseInt($('#extra6').val());
        var discount6 = parseInt($('#discount6').val());
        var total6 = $('#total6').val();
        if(tution6){
                tution6 = tution6
            }
            else{
                tution6 = 0
            }
            if(exam6){
                exam6 = exam6
            }
            else{
                exam6 = 0
            }
            if(book6){
                book6 = book6
            }
            else{
                book6 = 0
            }
            if(resitting6){
                resitting6 = resitting6
            }
            else{
                resitting6 = 0
            }
            if(entrance6){
                entrance6 = entrance6
            }
            else{
                entrance6 = 0
            }
            if(extra6){
                extra6 = extra6
            }
            else{
                extra6 = 0
            }
            if(discount6){
                discount6 = discount6
            }
            else{
                discount6 = 0
            }

        var tution7 = parseInt($('#tution7').val());
        var exam7 = parseInt($('#exam7').val());
        var book7 = parseInt($('#book7').val());
        var resitting7 = parseInt($('#resitting7').val());
        var entrance7 = parseInt($('#entrance7').val());
        var extra7 = parseInt($('#extra7').val());
        var discount7 = parseInt($('#discount7').val());
        var total7 = $('#total7').val();
        if(tution7){
                tution7 = tution7
            }
            else{
                tution7 = 0
            }
            if(exam7){
                exam7 = exam7
            }
            else{
                exam7 = 0
            }
            if(book7){
                book7 = book7
            }
            else{
                book7 = 0
            }
            if(resitting7){
                resitting7 = resitting7
            }
            else{
                resitting7 = 0
            }
            if(entrance7){
                entrance7 = entrance7
            }
            else{
                entrance7 = 0
            }
            if(extra7){
                extra7 = extra7
            }
            else{
                extra7 = 0
            }
            if(discount7){
                discount7 = discount7
            }
            else{
                discount7 = 0
            }

        var tution8 = parseInt($('#tution8').val());
        var exam8 = parseInt($('#exam8').val());
        var book8 = parseInt($('#book8').val());
        var resitting8 = parseInt($('#resitting8').val());
        var entrance8 = parseInt($('#entrance8').val());
        var extra8 = parseInt($('#extra8').val());
        var discount8 = parseInt($('#discount8').val());
        var total8 = $('#total8').val();
        if(tution8){
                tution8 = tution8
            }
            else{
                tution8 = 0
            }
            if(exam8){
                exam8 = exam8
            }
            else{
                exam8 = 0
            }
            if(book8){
                book8 = book8
            }
            else{
                book8 = 0
            }
            if(resitting8){
                resitting8 = resitting8
            }
            else{
                resitting8 = 0
            }
            if(entrance8){
                entrance8 = entrance8
            }
            else{
                entrance8 = 0
            }
            if(extra8){
                extra8 = extra8
            }
            else{
                extra8 = 0
            }
            if(discount8){
                discount8 = discount8
            }
            else{
                discount8 = 0
            }

        if(no_of_semester == 4){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4
                    
                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_semester == 6){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4,

                    'tution5' : tution5,
                    'exam5' : exam5,
                    'book5' : book5,
                    'resitting5' : resitting5,
                    'entrance5':entrance5,
                    'extra5':extra5,
                    'discount5':discount5,
                    'total5' : total5,

                    'tution6' : tution6,
                    'exam6' : exam6,
                    'book6' : book6,
                    'resitting6' : resitting6,
                    'entrance6':entrance6,
                    'extra6':extra6,
                    'discount6':discount6,
                    'total6' : total6

                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_semester == 8){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4,

                    'tution5' : tution5,
                    'exam5' : exam5,
                    'book5' : book5,
                    'resitting5' : resitting5,
                    'entrance5':entrance5,
                    'extra5':extra5,
                    'discount5':discount5,
                    'total5' : total5,

                    'tution6' : tution6,
                    'exam6' : exam6,
                    'book6' : book6,
                    'resitting6' : resitting6,
                    'entrance6':entrance6,
                    'extra6':extra6,
                    'discount6':discount6,
                    'total6' : total6,

                    'tution7' : tution7,
                    'exam7' : exam7,
                    'book7' : book7,
                    'resitting7' : resitting7,
                    'entrance7':entrance7,
                    'extra7':extra7,
                    'discount7':discount7,
                    'total7' : total7,

                    'tution8' : tution8,
                    'exam8' : exam8,
                    'book8' : book8,
                    'resitting8' : resitting8,
                    'entrance8':entrance8,
                    'extra8':extra8,
                    'discount8':discount8,
                    'total8' : total8

                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        

    }
    function year_savestudentfees(){
        var no_of_year = $('#total_year').val();
        var student = $('#student_year').val();
        var stream_year = $('#stream_year').val();


        
        var year_tution1 = parseInt($('#year_tution1').val());
        var year_exam1 = parseInt($('#year_exam1').val());
        var year_book1 = parseInt($('#year_book1').val());
        var year_resitting1 = parseInt($('#year_resitting1').val());
        var year_entrance1 = parseInt($('#year_entrance1').val());
        var year_extra1 = parseInt($('#year_extra1').val());
        var year_discount1 = parseInt($('#year_discount1').val());
        var year_total1 = $('#year_total1').val();
        if(year_tution1){
            year_tution1 = year_tution1
        }
        else{
            year_tution1 = 0
        }
        if(year_exam1){
            year_exam1 = year_exam1
        }
        else{
            year_exam1 = 0
        }
        if(year_book1){
            year_book1 = year_book1
        }
        else{
            year_book1 = 0
        }
        if(year_resitting1){
            year_resitting1 = year_resitting1
        }
        else{
            year_resitting1 = 0
        }
        if(year_entrance1){
            year_entrance1 = year_entrance1
        }
        else{
            year_entrance1 = 0
        }
        if(year_extra1){
            year_extra1 = year_extra1
        }
        else{
            year_extra1 = 0
        }
        if(year_discount1){
            year_discount1 = year_discount1
        }
        else{
            year_discount1 = 0
        }
        

        var year_tution2 = parseInt($('#year_tution2').val());
        var year_exam2 = parseInt($('#year_exam2').val());
        var year_book2 = parseInt($('#year_book2').val());
        var year_resitting2 = parseInt($('#year_resitting2').val());
        var year_entrance2 = parseInt($('#year_entrance2').val());
        var year_extra2 = parseInt($('#year_extra2').val());
        var year_discount2 = parseInt($('#year_discount2').val());
        var year_total2 = $('#year_total2').val();
        if(year_tution2){
            year_tution2 = year_tution2
        }
        else{
            year_tution2 = 0
        }
        if(year_exam2){
            year_exam2 = year_exam2
        }
        else{
            year_exam2 = 0
        }
        if(year_book2){
            year_book2 = year_book2
        }
        else{
            year_book2 = 0
        }
        if(year_resitting2){
            year_resitting2 = year_resitting2
        }
        else{
            year_resitting2 = 0
        }
        if(year_entrance2){
            year_entrance2 = year_entrance2
        }
        else{
            year_entrance2 = 0
        }
        if(year_extra2){
            year_extra2 = year_extra2
        }
        else{
            year_extra2 = 0
        }
        if(year_discount2){
            year_discount2 = year_discount2
        }
        else{
            year_discount2 = 0
        }


        var year_tution3 = parseInt($('#year_tution3').val());
        var year_exam3 = parseInt($('#year_exam3').val());
        var year_book3 = parseInt($('#year_book3').val());
        var year_resitting3 = parseInt($('#year_resitting3').val());
        var year_entrance3 = parseInt($('#year_entrance3').val());
        var year_extra3 = parseInt($('#year_extra3').val());
        var year_discount3 = parseInt($('#year_discount3').val());
        var year_total3 = $('#year_total3').val();
        if(year_tution3){
            year_tution3 = year_tution3
        }
        else{
            year_tution3 = 0
        }
        if(year_exam3){
            year_exam3 = year_exam3
        }
        else{
            year_exam3 = 0
        }
        if(year_book3){
            year_book3 = year_book3
        }
        else{
            year_book3 = 0
        }
        if(year_resitting3){
            year_resitting3 = year_resitting3
        }
        else{
            year_resitting3 = 0
        }
        if(year_entrance3){
            year_entrance3 = year_entrance3
        }
        else{
            year_entrance3 = 0
        }
        if(year_extra3){
            year_extra3 = year_extra3
        }
        else{
            year_extra3 = 0
        }
        if(year_discount3){
            year_discount3 = year_discount3
        }
        else{
            year_discount3 = 0
        }


        var year_tution4 = parseInt($('#year_tution4').val());
        var year_exam4 = parseInt($('#year_exam4').val());
        var year_book4 = parseInt($('#year_book4').val());
        var year_resitting4 = parseInt($('#year_resitting4').val());
        var year_entrance4 = parseInt($('#year_entrance4').val());
        var year_extra4 = parseInt($('#year_extra4').val());
        var year_discount4 = parseInt($('#year_discount4').val());
        var year_total4 = $('#year_total4').val();
        if(year_tution4){
            year_tution4 = year_tution4
        }
        else{
            year_tution4 = 0
        }
        if(year_exam4){
            year_exam4 = year_exam4
        }
        else{
            year_exam4 = 0
        }
        if(year_book4){
            year_book4 = year_book4
        }
        else{
            year_book4 = 0
        }
        if(year_resitting4){
            year_resitting4 = year_resitting4
        }
        else{
            year_resitting4 = 0
        }
        if(year_entrance4){
            year_entrance4 = year_entrance4
        }
        else{
            year_entrance4 = 0
        }
        if(year_extra4){
            year_extra4 = year_extra4
        }
        else{
            year_extra4 = 0
        }
        if(year_discount4){
            year_discount4 = year_discount4
        }
        else{
            year_discount4 = 0
        }

        if(no_of_year == 2){
            console.log("year 2")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,


                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_year == 3){
            console.log("year 3")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,

                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2,

                    'year_tution3' : year_tution3,
                    'year_exam3' : year_exam3,
                    'year_book3' : year_book3,
                    'year_resitting3' : year_resitting3,
                    'year_entrance3': year_entrance3,
                    'year_extra3': year_extra3,
                    'year_discount3': year_discount3,
                    'year_total3' : year_total3
                    
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_year == 4){
            console.log("year 4")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,

                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2,

                    'year_tution3' : year_tution3,
                    'year_exam3' : year_exam3,
                    'year_book3' : year_book3,
                    'year_resitting3' : year_resitting3,
                    'year_entrance3': year_entrance3,
                    'year_extra3': year_extra3,
                    'year_discount3': year_discount3,
                    'year_total3' : year_total3,

                    'year_tution4' : year_tution4,
                    'year_exam4' : year_exam4,
                    'year_book4' : year_book4,
                    'year_resitting4' : year_resitting4,
                    'year_entrance4': year_entrance4,
                    'year_extra4': year_extra4,
                    'year_discount4': year_discount4,
                    'year_total4' : year_total4

                    
                    
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }

    }
</script>




=======
{% extends 'includes/master.html' %}
{% load static %}
{% block head %}
<title>STUDENT FEES - CIIS</title>

{% endblock head %}


{% block nav %}

{% include 'sidebar.html' %}

{% endblock nav%}


{% block body %}
{% if request.user.is_superuser %}
<div class="student-fees">
    <section class="semester-fees ">
        <div class="outer-rectangle m-3">
            <div class="row">
                <div class="col-12">
                    <div class="section-header pt-3 px-3">
                        <h1 class="font-26 font-bold text-black text-uppercase">Search Student</h1>
    
                    </div>
                    
                        <div class=" select-padding ">
                            <div class="options  px-3 select-padding">
                                <div class="row">
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="enrollid" class="labelnotrequired">Enroll ID / Email / Mobile</label>
                                        <input type="text" name="enrollid" class="select-formatting font-bold font14 text-lightgray" id="enroll_id" placeholder="">
                                        
                                      
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="course" class="labelnotrequired">Course</label>
                                        <select name="course" id="course" class="session select-formatting font-14 font-bold text-lightgray">
                                            
                                            <option selected>Select</option>
                                            {% for i in course %}
                                            <option value="{{i.id}}">{{i.name}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3">
                                        <label for="stream" class="labelnotrequired">Stream</label>
                                        <select name="stream" id="stream" class="session select-formatting font-14 font-bold text-lightgray">
                                            <option value="0">Select</option> </select>
                                    </div>
                                    <div class="col-12 mt-4 mt-md-0 col-md-3" id="hideSubStream">
                                        <label for="substream" class="labelnotrequired">Sub Stream</label>
                                        <select name="substream" id="substream" class="session select-formatting font-14 font-bold text-lightgray">
                                            <option value="0">Select</option> </select>
                                    </div>
                                   
    
                                    
                                </div>
                            </div>
                        </div>
                 
                </div>
            </div>
           
        </div>
       

    </section>

    <div class="container">
        <div class="main">
          
      
           
            <div class="hiddendata" id="hiddendata" style="visibility: hidden;">
                <table class="table format-table details-table my-4" id="student-table">
                    <thead>
                        <tr>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Name</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Mobile</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Email</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Course</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Stream</th>
                            <th  class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Sub Stream</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Total Semester/Year</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col">Current Semester/Year</th>
                            <th class="font-14 font-bold text-darkgray bottom-border-grey line-height-35 px-2" scope="col"></th>
    
                        </tr>
                    </thead>
                    <tbody id="student-table-body">
    
                    </tbody>
                </table>
                <div id="errordata"></div>
            </div>
        </div>
        <div class="main_semester py-3" id="semesterhiddendata" style="visibility:hidden;">
    
        </div>
        <div class="main_year py-3" id="yearhiddendata" style="visibility:hidden;">
    
        </div>
    
    </div>
    <section class="semester-fees  ">
        <div class="outer-rectangle m-3">
            <div class="row">
                <div class="col-12">
                    <div class="section-header pt-3 px-3">
                        <h1 class="font-26 font-bold text-black text-uppercase">Search Student</h1>
    
                    </div>
                    
                        <div class=" select-padding px-3">
                            <div class="options  select-padding">
                                <div class="row">
                                    <div class="mt-4 col-12 mt-md-0 col-md-6">
                                        <label for="enrollid" class="labelnotrequired">Name</label>
                                        <input type="text" name="enrollid" class="select-formatting font-14 font-bold text-lightgray" id="name" placeholder="">
                                    </div>
                                    <div class="mt-4 col-12 col-md-6 mt-md-0">
                                        <button class=" edit-btn" onclick="Search()">Search</button>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    
                </div>
            </div>
        </div>
        
       

    </section>
  

    
</div>






{% else %}
<h1 class="text-center">Restricted</h1>
{% endif %}


<script language="JavaScript">
    $(document).ready( function () {
        $('#fees-collapse').addClass("show");
        $("#student_fees_link").removeClass("link-dark");
        $('#student_fees_link').addClass("link-primary");
        $('#hideSubStream').css('display', 'none');
} );
    $("#name").keypress(function(event) {
        
    if (event.which == 13) {
        console.log("Enter pressed")
        Search();
        }
    });
    function Search() {
        if ($('#enroll_id').val()) {
            $.ajax({ // create an AJAX call...
                data: {
                    'enroll_id': $('#enroll_id').val()
                }, // get the form data
                type: 'POST', // GET or POST
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}", // the file to call
                success: function (response) {
                    var data = response.student_data;
                    if (data == ''){
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        
                        data.forEach(myFunction);
                    }
                    data.forEach(myFunction);
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });

        }

        if ($('#name').val()) {
            $.ajax({ // create an AJAX call...
                data: {
                    'name': $('#name').val()
                }, // get the form data
                type: 'POST', // GET or POST
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}", // the file to call
                success: function (response) {
                    var data = response.student_data;
                    if (data == ''){
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        
                        data.forEach(myFunction);
                    }
                   
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });
        }

    }
    document.getElementById("course").onchange = function () {
        var courseid = this.value;
        $.ajax
            ({
                data: {
                    'courseid': courseid
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    $('#stream').empty();
                    $('#stream').append('<option selected>Select Stream</option>');
                    var data = response.stream;
                    data.forEach(myFunction);
                    function myFunction(item) {
                        duration = item.sem
                        $('#stream').append('<option value=' + item.id + '>' + item.name + '</option>');
                    }
                }
            });

    }
    document.getElementById("stream").onchange = function () {
        var stream = this.value;
        var course = $('#course').val();
       
        $.ajax
            ({
                data: {
                    'streamid': stream
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    if (response.substream.length > 0) {
                        $('#hideSubStream').css('display', 'block');
                        $('#substream').empty();
                        $('#substream').append('<option selected>Select Sub Stream</option>');
                        var data = response.substream;
                        data.forEach(myFunction);
                        function myFunction(item) {
                            duration = item.sem
                            $('#substream').append('<option value=' + item.id + '>' + item.name + '</option>');
                        }
                    }
                    else {
                        $('#hideSubStream').css('display', 'none');
                        $('#substream').empty();
                        fetchFeeDetails(course, stream, '');
                    }
                    fetchFeeDetails(course, stream, '');
                }
            });


        
    }
    document.getElementById('substream').onchange = function () {
        var course = $('#course').val();
        var stream = $('#stream').val();
        var substream = $('#substream').val();
        if (substream == 'Select Sub Stream')
            substream = '';
        fetchFeeDetails(course, stream, substream);
    }
    function fetchFeeDetails(course, stream, substream){
        $.ajax
            ({
                data: {
                    'course_id': course,
                    'stream_id': stream,
                    'substream_id': substream
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                   
                    console.log(response)
                    var data = response.student_data;
                    if (data == ''){
                        $('#errordata').empty();
                        $('#hiddendata').css('visibility', 'visible')
                         $('#student-table').css('visibility', 'hidden')
                        $('#errordata').append(`<div class="font-20 text-extralightgray px-2 text-center" >No data found </div>`)
                    }
                    else{
                        $('#student-table-body').empty();
                        $('#errordata').empty();
                        $('#student-table').css('visibility', 'visible')
                        data.forEach(myFunction);
                    }
                    
                    function myFunction(item) {
                        $('#student-table-body').append(`
                <tr>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.name} </td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.mobile}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.email}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.course}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.stream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.substream}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.total_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col">${item.current_semyear}</td>
                    <td class="font-14 text-extralightgray px-2 text-center" scope="col"><button onclick="redirectpage(${item.enrollment_id})" class="blue-bg text-blue font-bold font-12 no-border" >View</button></td>
                </tr>
                `);
                    }
                }
            });
    }
    function redirectpage(enroll_id) {
        $.ajax
            ({
                data: {
                    'getoldstudentfees_enroll_id': enroll_id
                },
                type: 'POST',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                url: "{% url 'studentfees' %}",
                success: function (response) {
                    $('#semesterhiddendata').empty();
                    $('#yearhiddendata').empty();


                    $('#semesterhiddendata').css('visibility', 'hidden');

                    $('#yearhiddendata').css('visibility', 'hidden');

                    console.log(response)
                    if (response.studypattern == "Semester") {
                        $('#semesterhiddendata').append(`
                            <h2 class="font-22 text-darkblue font-bold">Semester Fees</h2>
                            <input type="text" id="total_semester" class="invisible"><input type="text" id="student_semester" class="invisible"><input type="text" id="stream_semester" class="invisible">
                            <div id="semester_output"></div>
                            <table class="table format-table details-table my-4" id="semester_table">
                                <thead id="thead_fees">
                                    
                                </thead>
                                <tbody id="tbody_fees">

                                </tbody>
                            </table>
                            <button class="save-btn width-20" onclick="semester_savestudentfees()">Save</button>
                            `);
                                    $('#thead_fees').append(`
                                <tr>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Semester</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Tution Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Examination Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">STUDY MATERIAL FEES</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Re-Sitting Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Entrance Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Additional Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Discount</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Total Fees</th>
                                    <th class="font-14 text-extralightgray px-2 text-center" scope="col">Calculate Discount</th>
                                    
                                </tr>
                        `);


                        $('#semesterhiddendata').css('visibility', 'visible')
                        $('#total_semester').val(response.count);
                        $('#student_semester').val(response.student)
                        $('#stream_semester').val($('#stream option:selected').val());
                        data = response.data
                        if (data.length != 0) {
                        data.forEach(myfunction1)
                        var count = 0
                        function myfunction1(item, count) {
                            count = count + 1
                            $('#tbody_fees').append(`
                        
                            <tr>
                                <th scope="row">Semester ${count}</th>
                                <td><input class="form-control txtCal${count}" id="tution${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="exam${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="book${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="resitting${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="entrance${count}" /></td>
                                <td><input class="form-control txtCal${count}" id="extra${count}" /></td>
                                <td><input class="form-control" id="discount${count}" /></td>
                                <td><input class="form-control" id="total${count}" /></td>
                                <td> <button class="blue-bg text-blue font-bold font-12 no-border" onclick="CalculateDiscountSem(${count})" >Calculate </button> </td>
                            </tr>

                        `);
                            if (item.sem == "1") {
                                $('#tution1').val(item.tutionfees);
                                $('#exam1').val(item.examinationfees);
                                $('#book1').val(item.bookfees);
                                $('#resitting1').val(item.resittingfees);
                                $('#entrance1').val(item.entrancefees);
                                $('#extra1').val(item.extrafees);
                                $('#discount1').val(item.discount);
                                $('#total1').val(item.totalfees);
                            }
                            else if (item.sem == "2") {
                                $('#tution2').val(item.tutionfees);
                                $('#exam2').val(item.examinationfees);
                                $('#book2').val(item.bookfees);
                                $('#resitting2').val(item.resittingfees);
                                $('#entrance2').val(item.entrancefees);
                                $('#extra2').val(item.extrafees);
                                $('#discount2').val(item.discount);
                                $('#total2').val(item.totalfees);
                            }
                            else if (item.sem == "3") {
                                $('#tution3').val(item.tutionfees);
                                $('#exam3').val(item.examinationfees);
                                $('#book3').val(item.bookfees);
                                $('#resitting3').val(item.resittingfees);
                                $('#entrance3').val(item.entrancefees);
                                $('#extra3').val(item.extrafees);
                                $('#discount3').val(item.discount);
                                $('#total3').val(item.totalfees);
                            }
                            else if (item.sem == "4") {
                                $('#tution4').val(item.tutionfees);
                                $('#exam4').val(item.examinationfees);
                                $('#book4').val(item.bookfees);
                                $('#resitting4').val(item.resittingfees);
                                $('#entrance4').val(item.entrancefees);
                                $('#extra4').val(item.extrafees);
                                $('#discount4').val(item.discount);
                                $('#total4').val(item.totalfees);
                            }
                            else if (item.sem == "5") {
                                $('#tution5').val(item.tutionfees);
                                $('#exam5').val(item.examinationfees);
                                $('#book5').val(item.bookfees);
                                $('#resitting5').val(item.resittingfees);
                                $('#entrance5').val(item.entrancefees);
                                $('#extra5').val(item.extrafees);
                                $('#discount5').val(item.discount);
                                $('#total5').val(item.totalfees);
                            }
                            else if (item.sem == "6") {
                                $('#tution6').val(item.tutionfees);
                                $('#exam6').val(item.examinationfees);
                                $('#book6').val(item.bookfees);
                                $('#resitting6').val(item.resittingfees);
                                $('#entrance6').val(item.entrancefees);
                                $('#extra6').val(item.extrafees);
                                $('#discount6').val(item.discount);
                                $('#total6').val(item.totalfees);
                            }
                            else if (item.sem == "7") {
                                $('#tution7').val(item.tutionfees);
                                $('#exam7').val(item.examinationfees);
                                $('#book7').val(item.bookfees);
                                $('#resitting7').val(item.resittingfees);
                                $('#entrance7').val(item.entrancefees);
                                $('#extra7').val(item.extrafees);
                                $('#discount7').val(item.discount);
                                $('#total7').val(item.totalfees);
                            }
                            else if (item.sem == "8") {
                                $('#tution8').val(item.tutionfees);
                                $('#exam8').val(item.examinationfees);
                                $('#book8').val(item.bookfees);
                                $('#resitting8').val(item.resittingfees);
                                $('#entrance8').val(item.entrancefees);
                                $('#extra8').val(item.extrafees);
                                $('#discount8').val(item.discount);
                                $('#total8').val(item.totalfees);
                            }

                            $("#semester_table").on('input', '.txtCal1', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal1").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total1").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal2', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal2").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total2").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal3', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal3").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total3").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal4', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal4").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total4").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal5', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal5").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total5").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal6', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal6").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total6").val(calculated_total_sum);
                            });

                            $("#myTable").on('input', '.txtCal7', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal7").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total7").val(calculated_total_sum);
                            });
                            $("#myTable").on('input', '.txtCal8', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal8").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total8").val(calculated_total_sum);
                            });

                        }
                        }
                        else {
                            var total_semesters = response.sem * 2
                            $('#total_semester').val(total_semesters);
                            for(var i=1;i<=total_semesters;i++){
                                $('#tbody_fees').append(`
                                <tr>
                                    <th scope="row">Semester ${i}</th>
                                    <td><input class="form-control txtCal${count}" id="tution${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="exam${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="book${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="resitting${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="entrance${count}" /></td>
                                    <td><input class="form-control txtCal${count}" id="extra${count}" /></td>
                                    <td><input class="form-control" id="discount${count}" /></td>
                                    <td><input class="form-control" id="total${count}" /></td>
                                </tr>

                                `);
                                

                            }
                            $("#semester_table").on('input', '.txtCal1', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal1").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total1").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal2', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal2").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total2").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal3', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal3").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total3").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal4', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal4").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total4").val(calculated_total_sum);
                            });
                            $("#semester_table").on('input', '.txtCal5', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal5").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total5").val(calculated_total_sum);
                            });

                            $("#semester_table").on('input', '.txtCal6', function () {
                                var calculated_total_sum = 0;

                                $("#semester_table .txtCal6").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total6").val(calculated_total_sum);
                            });

                            $("#myTable").on('input', '.txtCal7', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal7").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total7").val(calculated_total_sum);
                            });
                            $("#myTable").on('input', '.txtCal8', function () {
                                var calculated_total_sum = 0;

                                $("#myTable .txtCal8").each(function () {
                                    var get_textbox_value = $(this).val();
                                    if ($.isNumeric(get_textbox_value)) {
                                        calculated_total_sum += parseFloat(get_textbox_value);
                                    }
                                });

                                $("#total8").val(calculated_total_sum);
                            });
                        }

                }

                    else if (response.studypattern == "Annual") {
                        $('#yearhiddendata').append(`
                            <h2>Annual Fees</h2>
                            <input type="text" id="total_year" style="visibility:hidden;"><input type="text" id="student_year" style="visibility:hidden;"><input type="text" id="stream_year" style="visibility:hidden;">
                            <div id="year_output"></div>
                            <table class="table" id="year_table">
                                <thead id="year_thead_fees">
                                    
                                </thead>
                                <tbody id="year_tbody_fees">

                                </tbody>
                            </table>
                            <button class="save-btn width-20" onclick="year_savestudentfees()">Save</button>
                            `);
                                    $('#year_thead_fees').append(`
                                <tr>
                                    <th scope="col">Year</th>
                                    <th scope="col">Tution Fees</th>
                                    <th scope="col">Examination Fees</th>
                                    <th scope="col">STUDY MATERIAL FEES</th>
                                    <th scope="col">Re-Sitting Fees</th>
                                    <th scope="col">Entrance Fees</th>
                                    <th scope="col">Additional Fees</th>
                                    <th scope="col">Discount</th>
                                    <th scope="col">Total Fees</th>
                                    <th scope="col">Calculate Discount</th> 
                                </tr>
                            `);


                        $('#yearhiddendata').css('visibility', 'visible')
                        $('#total_year').val(response.count);
                        $('#student_year').val(response.student)
                        $('#stream_year').val($('#stream option:selected').val());
                        data = response.data
                        if (data.length != 0) {
                            console.log("if statement")
                            data.forEach(myfunction1)
                            var count = 0
                            function myfunction1(item, count) {
                                count = count + 1
                                $('#year_tbody_fees').append(`
                        
                            <tr>
                                <th scope="row">Year ${count}</th>
                                <td><input class="form-control year_txtCal${count}" id="year_tution${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_exam${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_book${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_resitting${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_entrance${count}" /></td>
                                <td><input class="form-control year_txtCal${count}" id="year_extra${count}" /></td>
                                <td><input class="form-control" id="year_discount${count}" /></td>
                                <td><input class="form-control" id="year_total${count}" /></td>
                                <td> <button class="blue-bg text-blue font-bold font-12 no-border" onclick="CalculateDiscountYear(${count})">Calculate</button> </td>
                            </tr>

                        `);
                                if (item.sem == "1") {
                                    $('#year_tution1').val(item.tutionfees);
                                    $('#year_exam1').val(item.examinationfees);
                                    $('#year_book1').val(item.bookfees);
                                    $('#year_resitting1').val(item.resittingfees);
                                    $('#year_entrance1').val(item.entrancefees);
                                    $('#year_extra1').val(item.extrafees);
                                    $('#year_discount1').val(item.discount);
                                    $('#year_total1').val(item.totalfees);
                                }
                                else if (item.sem == "2") {
                                    $('#year_tution2').val(item.tutionfees);
                                    $('#year_exam2').val(item.examinationfees);
                                    $('#year_book2').val(item.bookfees);
                                    $('#year_resitting2').val(item.resittingfees);
                                    $('#year_entrance2').val(item.entrancefees);
                                    $('#year_extra2').val(item.extrafees);
                                    $('#year_discount2').val(item.discount);
                                    $('#year_total2').val(item.totalfees);
                                }
                                else if (item.sem == "3") {
                                    $('#year_tution3').val(item.tutionfees);
                                    $('#year_exam3').val(item.examinationfees);
                                    $('#year_book3').val(item.bookfees);
                                    $('#year_resitting3').val(item.resittingfees);
                                    $('#year_entrance3').val(item.entrancefees);
                                    $('#year_extra3').val(item.extrafees);
                                    $('#year_discount3').val(item.discount);
                                    $('#year_total3').val(item.totalfees);
                                }
                                else if (item.sem == "4") {
                                    $('#year_tution4').val(item.tutionfees);
                                    $('#year_exam4').val(item.examinationfees);
                                    $('#year_book4').val(item.bookfees);
                                    $('#year_resitting4').val(item.resittingfees);
                                    $('#year_entrance4').val(item.entrancefees);
                                    $('#year_extra4').val(item.extrafees);
                                    $('#year_discount4').val(item.discount);
                                    $('#year_total4').val(item.totalfees);
                                }

                                


                                $("#year_table").on('input', '.year_txtCal1', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal1").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total1").val(calculated_total_sum);
                                    
                                });

                                $("#year_table").on('input', '.year_txtCal2', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal2").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total2").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_txtCal3', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal3").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total3").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_txtCal4', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_txtCal4").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total4").val(calculated_total_sum);
                                });


                            }
                        }
                        else {
                            console.log("else statement")
                            $('#total_year').val(response.sem);
                            for(var i=1;i<=response.sem;i++){
                                $('#year_tbody_fees').append(`
                                    <tr>
                                        <th scope="row">Year ${i}</th>
                                        <td><input class="form-control year_txtCal${i}" id="year_tution${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_exam${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_book${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_resitting${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_entrance${i}" /></td>
                                        <td><input class="form-control year_txtCal${i}" id="year_extra${i}" /></td>
                                        <td><input class="form-control" id="year_disi${i}" /></td>
                                        <td><input class="form-control" id="year_total${i}" /></td>
                                    </tr>

                                `);
                                

                            }
                            $("#year_table").on('input', '.year_textcal1', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal1").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total1").val(calculated_total_sum);
                                });

                                $("#year_table").on('input', '.year_textcal2', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal2").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total2").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_textcal3', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal3").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total3").val(calculated_total_sum);
                                });
                                $("#year_table").on('input', '.year_textcal4', function () {
                                    var calculated_total_sum = 0;

                                    $("#year_table .year_textcal4").each(function () {
                                        var get_textbox_value = $(this).val();
                                        if ($.isNumeric(get_textbox_value)) {
                                            calculated_total_sum += parseFloat(get_textbox_value);
                                        }
                                    });

                                    $("#year_total4").val(calculated_total_sum);
                                });
                        }
                    }


                }
            });

    }

    function CalculateDiscountSem(sem){
        if(sem == 1){
            // $('#tution1').val(item.tutionfees);
            // $('#exam1').val(item.examinationfees);
            // $('#book1').val(item.bookfees);
            // $('#resitting1').val(item.resittingfees);
            // $('#entrance1').val(item.entrancefees);
            // $('#extra1').val(item.extrafees);
            // $('#discount1').val(item.discount);
            // $('#total1').val(item.totalfees);
            
            var tution = parseInt($('#tution1').val());
            var exam = parseInt($('#exam1').val());
            var book = parseInt($('#book1').val());
            var resitting = parseInt($('#resitting1').val());
            var entrance = parseInt($('#entrance1').val());
            var extra = parseInt($('#extra1').val());
            var discount = parseInt($('#discount1').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total1').val(total);
        }
        else if(sem == 2){
            
            var tution = parseInt($('#tution2').val());
            var exam = parseInt($('#exam2').val());
            var book = parseInt($('#book2').val());
            var resitting = parseInt($('#resitting2').val());
            var entrance = parseInt($('#entrance2').val());
            var extra = parseInt($('#extra2').val());
            var discount = parseInt($('#discount2').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total2').val(total);
        }
        else if(sem == 3){
            
            var tution = parseInt($('#tution3').val());
            var exam = parseInt($('#exam3').val());
            var book = parseInt($('#book3').val());
            var resitting = parseInt($('#resitting3').val());
            var entrance = parseInt($('#entrance3').val());
            var extra = parseInt($('#extra3').val());
            var discount = parseInt($('#discount3').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total3').val(total);
        }
        else if(sem == 4){
            
            var tution = parseInt($('#tution4').val());
            var exam = parseInt($('#exam4').val());
            var book = parseInt($('#book4').val());
            var resitting = parseInt($('#resitting4').val());
            var entrance = parseInt($('#entrance4').val());
            var extra = parseInt($('#extra4').val());
            var discount = parseInt($('#discount4').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total4').val(total);
        }
        else if(sem == 5){
            
            var tution = parseInt($('#tution5').val());
            var exam = parseInt($('#exam5').val());
            var book = parseInt($('#book5').val());
            var resitting = parseInt($('#resitting5').val());
            var entrance = parseInt($('#entrance5').val());
            var extra = parseInt($('#extra5').val());
            var discount = parseInt($('#discount5').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total5').val(total);
        }
        else if(sem == 6){
            
            var tution = parseInt($('#tution6').val());
            var exam = parseInt($('#exam6').val());
            var book = parseInt($('#book6').val());
            var resitting = parseInt($('#resitting6').val());
            var entrance = parseInt($('#entrance6').val());
            var extra = parseInt($('#extra6').val());
            var discount = parseInt($('#discount6').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total6').val(total);
        }
        else if(sem == 7){
            
            var tution = parseInt($('#tution7').val());
            var exam = parseInt($('#exam7').val());
            var book = parseInt($('#book7').val());
            var resitting = parseInt($('#resitting7').val());
            var entrance = parseInt($('#entrance7').val());
            var extra = parseInt($('#extra7').val());
            var discount = parseInt($('#discount7').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total7').val(total);
        }
        else if(sem == 8){
            
            var tution = parseInt($('#tution8').val());
            var exam = parseInt($('#exam8').val());
            var book = parseInt($('#book8').val());
            var resitting = parseInt($('#resitting8').val());
            var entrance = parseInt($('#entrance8').val());
            var extra = parseInt($('#extra8').val());
            var discount = parseInt($('#discount8').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#total8').val(total);
        }
        
    }  
    function CalculateDiscountYear(year){
        if(year == 1){
            var tution = parseInt($('#year_tution1').val());
            var exam = parseInt($('#year_exam1').val());
            var book = parseInt($('#year_book1').val());
            var resitting = parseInt($('#year_resitting1').val());
            var entrance = parseInt($('#year_entrance1').val());
            var extra = parseInt($('#year_extra1').val());
            var discount = parseInt($('#year_discount1').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total1').val(total);
            
        }
        else if(year == 2){
            var tution = parseInt($('#year_tution2').val());
            var exam = parseInt($('#year_exam2').val());
            var book = parseInt($('#year_book2').val());
            var resitting = parseInt($('#year_resitting2').val());
            var entrance = parseInt($('#year_entrance2').val());
            var extra = parseInt($('#year_extra2').val());
            var discount = parseInt($('#year_discount2').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total2').val(total);
        }
        else if(year == 3){
            var tution = parseInt($('#year_tution3').val());
            var exam = parseInt($('#year_exam3').val());
            var book = parseInt($('#year_book3').val());
            var resitting = parseInt($('#year_resitting3').val());
            var entrance = parseInt($('#year_entrance3').val());
            var extra = parseInt($('#year_extra3').val());
            var discount = parseInt($('#year_discount3').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total3').val(total);
        }
        else if(year == 4){
            var tution = parseInt($('#year_tution4').val());
            var exam = parseInt($('#year_exam4').val());
            var book = parseInt($('#year_book4').val());
            var resitting = parseInt($('#year_resitting4').val());
            var entrance = parseInt($('#year_entrance4').val());
            var extra = parseInt($('#year_extra4').val());
            var discount = parseInt($('#year_discount4').val());
            if(tution){
                tution = tution
            }
            else{
                tution = 0
            }
            if(exam){
                exam = exam
            }
            else{
                exam = 0
            }
            if(book){
                book = book
            }
            else{
                book = 0
            }
            if(resitting){
                resitting = resitting
            }
            else{
                resitting = 0
            }
            if(entrance){
                entrance = entrance
            }
            else{
                entrance = 0
            }
            if(extra){
                extra = extra
            }
            else{
                extra = 0
            }
            if(discount){
                discount = discount
            }
            else{
                discount = 0
            }
            var total = ( tution + exam + book + resitting + entrance + extra  ) - discount;
            $('#year_total4').val(total);
        }
        
        
        
    } 


    function semester_savestudentfees(){
        var no_of_semester = $('#total_semester').val();
        var student = $('#student_semester').val();
        var stream_semester = $('#stream_semester').val();


        var tution1 = parseInt($('#tution1').val());
        var exam1 = parseInt($('#exam1').val());
        var book1 = parseInt($('#book1').val());
        var resitting1 = parseInt($('#resitting1').val());
        var entrance1 = parseInt($('#entrance1').val());
        var extra1 = parseInt($('#extra1').val());
        var discount1 = parseInt($('#discount1').val());
        var total1 = $('#total1').val();
        if(tution1){
                tution1 = tution1
            }
            else{
                tution1 = 0
            }
            if(exam1){
                exam1 = exam1
            }
            else{
                exam1 = 0
            }
            if(book1){
                book1 = book1
            }
            else{
                book1 = 0
            }
            if(resitting1){
                resitting1 = resitting1
            }
            else{
                resitting1 = 0
            }
            if(entrance1){
                entrance1 = entrance1
            }
            else{
                entrance1 = 0
            }
            if(extra1){
                extra1 = extra1
            }
            else{
                extra1 = 0
            }
            if(discount1){
                discount1 = discount1
            }
            else{
                discount1 = 0
            }

        var tution2 = parseInt($('#tution2').val());
        var exam2 = parseInt($('#exam2').val());
        var book2 = parseInt($('#book2').val());
        var resitting2 = parseInt($('#resitting2').val());
        var entrance2 = parseInt($('#entrance2').val());
        var extra2 = parseInt($('#extra2').val());
        var discount2 = parseInt($('#discount2').val());
        var total2 = $('#total2').val();
        if(tution2){
                tution2 = tution2
            }
            else{
                tution2 = 0
            }
            if(exam2){
                exam2 = exam2
            }
            else{
                exam2 = 0
            }
            if(book2){
                book2 = book2
            }
            else{
                book2 = 0
            }
            if(resitting2){
                resitting2 = resitting2
            }
            else{
                resitting2 = 0
            }
            if(entrance2){
                entrance2 = entrance2
            }
            else{
                entrance2 = 0
            }
            if(extra2){
                extra2 = extra2
            }
            else{
                extra2 = 0
            }
            if(discount2){
                discount2 = discount2
            }
            else{
                discount2 = 0
            }

        var tution3 = parseInt($('#tution3').val());
        var exam3 = parseInt($('#exam3').val());
        var book3 = parseInt($('#book3').val());
        var resitting3 = parseInt($('#resitting3').val());
        var entrance3 = parseInt($('#entrance3').val());
        var extra3 = parseInt($('#extra3').val());
        var discount3 = parseInt($('#discount3').val());
        var total3 = $('#total3').val();
        if(tution3){
                tution3 = tution3
            }
            else{
                tution3 = 0
            }
            if(exam3){
                exam3 = exam3
            }
            else{
                exam3 = 0
            }
            if(book3){
                book3 = book3
            }
            else{
                book3 = 0
            }
            if(resitting3){
                resitting3 = resitting3
            }
            else{
                resitting3 = 0
            }
            if(entrance3){
                entrance3 = entrance3
            }
            else{
                entrance3 = 0
            }
            if(extra3){
                extra3 = extra3
            }
            else{
                extra3 = 0
            }
            if(discount3){
                discount3 = discount3
            }
            else{
                discount3 = 0
            }

        var tution4 = parseInt($('#tution4').val());
        var exam4 = parseInt($('#exam4').val());
        var book4 = parseInt($('#book4').val());
        var resitting4 = parseInt($('#resitting4').val());
        var entrance4 = parseInt($('#entrance4').val());
        var extra4 = parseInt($('#extra4').val());
        var discount4 = parseInt($('#discount4').val());
        var total4 = $('#total4').val();
        if(tution4){
                tution4 = tution4
            }
            else{
                tution4 = 0
            }
            if(exam4){
                exam4 = exam4
            }
            else{
                exam4 = 0
            }
            if(book4){
                book4 = book4
            }
            else{
                book4 = 0
            }
            if(resitting4){
                resitting4 = resitting4
            }
            else{
                resitting4 = 0
            }
            if(entrance4){
                entrance4 = entrance4
            }
            else{
                entrance4 = 0
            }
            if(extra4){
                extra4 = extra4
            }
            else{
                extra4 = 0
            }
            if(discount4){
                discount4 = discount4
            }
            else{
                discount4 = 0
            }

        var tution5 = parseInt($('#tution5').val());
        var exam5 = parseInt($('#exam5').val());
        var book5 = parseInt($('#book5').val());
        var resitting5 = parseInt($('#resitting5').val());
        var entrance5 = parseInt($('#entrance5').val());
        var extra5 = parseInt($('#extra5').val());
        var discount5 = parseInt($('#discount5').val());
        var total5 = $('#total5').val();
        if(tution5){
                tution5 = tution5
            }
            else{
                tution5 = 0
            }
            if(exam5){
                exam5 = exam5
            }
            else{
                exam5 = 0
            }
            if(book5){
                book5 = book5
            }
            else{
                book5 = 0
            }
            if(resitting5){
                resitting5 = resitting5
            }
            else{
                resitting5 = 0
            }
            if(entrance5){
                entrance5 = entrance5
            }
            else{
                entrance5 = 0
            }
            if(extra5){
                extra5 = extra5
            }
            else{
                extra5 = 0
            }
            if(discount5){
                discount5 = discount5
            }
            else{
                discount5 = 0
            }

        var tution6 = parseInt($('#tution6').val());
        var exam6 = parseInt($('#exam6').val());
        var book6 = parseInt($('#book6').val());
        var resitting6 = parseInt($('#resitting6').val());
        var entrance6 = parseInt($('#entrance6').val());
        var extra6 = parseInt($('#extra6').val());
        var discount6 = parseInt($('#discount6').val());
        var total6 = $('#total6').val();
        if(tution6){
                tution6 = tution6
            }
            else{
                tution6 = 0
            }
            if(exam6){
                exam6 = exam6
            }
            else{
                exam6 = 0
            }
            if(book6){
                book6 = book6
            }
            else{
                book6 = 0
            }
            if(resitting6){
                resitting6 = resitting6
            }
            else{
                resitting6 = 0
            }
            if(entrance6){
                entrance6 = entrance6
            }
            else{
                entrance6 = 0
            }
            if(extra6){
                extra6 = extra6
            }
            else{
                extra6 = 0
            }
            if(discount6){
                discount6 = discount6
            }
            else{
                discount6 = 0
            }

        var tution7 = parseInt($('#tution7').val());
        var exam7 = parseInt($('#exam7').val());
        var book7 = parseInt($('#book7').val());
        var resitting7 = parseInt($('#resitting7').val());
        var entrance7 = parseInt($('#entrance7').val());
        var extra7 = parseInt($('#extra7').val());
        var discount7 = parseInt($('#discount7').val());
        var total7 = $('#total7').val();
        if(tution7){
                tution7 = tution7
            }
            else{
                tution7 = 0
            }
            if(exam7){
                exam7 = exam7
            }
            else{
                exam7 = 0
            }
            if(book7){
                book7 = book7
            }
            else{
                book7 = 0
            }
            if(resitting7){
                resitting7 = resitting7
            }
            else{
                resitting7 = 0
            }
            if(entrance7){
                entrance7 = entrance7
            }
            else{
                entrance7 = 0
            }
            if(extra7){
                extra7 = extra7
            }
            else{
                extra7 = 0
            }
            if(discount7){
                discount7 = discount7
            }
            else{
                discount7 = 0
            }

        var tution8 = parseInt($('#tution8').val());
        var exam8 = parseInt($('#exam8').val());
        var book8 = parseInt($('#book8').val());
        var resitting8 = parseInt($('#resitting8').val());
        var entrance8 = parseInt($('#entrance8').val());
        var extra8 = parseInt($('#extra8').val());
        var discount8 = parseInt($('#discount8').val());
        var total8 = $('#total8').val();
        if(tution8){
                tution8 = tution8
            }
            else{
                tution8 = 0
            }
            if(exam8){
                exam8 = exam8
            }
            else{
                exam8 = 0
            }
            if(book8){
                book8 = book8
            }
            else{
                book8 = 0
            }
            if(resitting8){
                resitting8 = resitting8
            }
            else{
                resitting8 = 0
            }
            if(entrance8){
                entrance8 = entrance8
            }
            else{
                entrance8 = 0
            }
            if(extra8){
                extra8 = extra8
            }
            else{
                extra8 = 0
            }
            if(discount8){
                discount8 = discount8
            }
            else{
                discount8 = 0
            }

        if(no_of_semester == 4){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4
                    
                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_semester == 6){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4,

                    'tution5' : tution5,
                    'exam5' : exam5,
                    'book5' : book5,
                    'resitting5' : resitting5,
                    'entrance5':entrance5,
                    'extra5':extra5,
                    'discount5':discount5,
                    'total5' : total5,

                    'tution6' : tution6,
                    'exam6' : exam6,
                    'book6' : book6,
                    'resitting6' : resitting6,
                    'entrance6':entrance6,
                    'extra6':extra6,
                    'discount6':discount6,
                    'total6' : total6

                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_semester == 8){
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {

                    'student':student,
                    "no_of_semester":no_of_semester,
                    'stream_semester':stream_semester,


                    'tution1' : tution1,
                    'exam1' : exam1,
                    'book1' : book1,
                    'resitting1' : resitting1,
                    'entrance1':entrance1,
                    'extra1':extra1,
                    'discount1':discount1,
                    'total1' : total1,

                    'tution2' : tution2,
                    'exam2' : exam2,
                    'book2' : book2,
                    'resitting2' : resitting2,
                    'entrance2':entrance2,
                    'extra2':extra2,
                    'discount2':discount2,
                    'total2' : total2,

                    'tution3' : tution3,
                    'exam3' : exam3,
                    'book3' : book3,
                    'resitting3' : resitting3,
                    'entrance3':entrance3,
                    'extra3':extra3,
                    'discount3':discount3,
                    'total3' : total3,
                    
                    'tution4' : tution4,
                    'exam4' : exam4,
                    'book4' : book4,
                    'resitting4' : resitting4,
                    'entrance4':entrance4,
                    'extra4':extra4,
                    'discount4':discount4,
                    'total4' : total4,

                    'tution5' : tution5,
                    'exam5' : exam5,
                    'book5' : book5,
                    'resitting5' : resitting5,
                    'entrance5':entrance5,
                    'extra5':extra5,
                    'discount5':discount5,
                    'total5' : total5,

                    'tution6' : tution6,
                    'exam6' : exam6,
                    'book6' : book6,
                    'resitting6' : resitting6,
                    'entrance6':entrance6,
                    'extra6':extra6,
                    'discount6':discount6,
                    'total6' : total6,

                    'tution7' : tution7,
                    'exam7' : exam7,
                    'book7' : book7,
                    'resitting7' : resitting7,
                    'entrance7':entrance7,
                    'extra7':extra7,
                    'discount7':discount7,
                    'total7' : total7,

                    'tution8' : tution8,
                    'exam8' : exam8,
                    'book8' : book8,
                    'resitting8' : resitting8,
                    'entrance8':entrance8,
                    'extra8':extra8,
                    'discount8':discount8,
                    'total8' : total8

                    
                    },
            success: function (res) {
                $('#semester_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#semester_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        

    }
    function year_savestudentfees(){
        var no_of_year = $('#total_year').val();
        var student = $('#student_year').val();
        var stream_year = $('#stream_year').val();


        
        var year_tution1 = parseInt($('#year_tution1').val());
        var year_exam1 = parseInt($('#year_exam1').val());
        var year_book1 = parseInt($('#year_book1').val());
        var year_resitting1 = parseInt($('#year_resitting1').val());
        var year_entrance1 = parseInt($('#year_entrance1').val());
        var year_extra1 = parseInt($('#year_extra1').val());
        var year_discount1 = parseInt($('#year_discount1').val());
        var year_total1 = $('#year_total1').val();
        if(year_tution1){
            year_tution1 = year_tution1
        }
        else{
            year_tution1 = 0
        }
        if(year_exam1){
            year_exam1 = year_exam1
        }
        else{
            year_exam1 = 0
        }
        if(year_book1){
            year_book1 = year_book1
        }
        else{
            year_book1 = 0
        }
        if(year_resitting1){
            year_resitting1 = year_resitting1
        }
        else{
            year_resitting1 = 0
        }
        if(year_entrance1){
            year_entrance1 = year_entrance1
        }
        else{
            year_entrance1 = 0
        }
        if(year_extra1){
            year_extra1 = year_extra1
        }
        else{
            year_extra1 = 0
        }
        if(year_discount1){
            year_discount1 = year_discount1
        }
        else{
            year_discount1 = 0
        }
        

        var year_tution2 = parseInt($('#year_tution2').val());
        var year_exam2 = parseInt($('#year_exam2').val());
        var year_book2 = parseInt($('#year_book2').val());
        var year_resitting2 = parseInt($('#year_resitting2').val());
        var year_entrance2 = parseInt($('#year_entrance2').val());
        var year_extra2 = parseInt($('#year_extra2').val());
        var year_discount2 = parseInt($('#year_discount2').val());
        var year_total2 = $('#year_total2').val();
        if(year_tution2){
            year_tution2 = year_tution2
        }
        else{
            year_tution2 = 0
        }
        if(year_exam2){
            year_exam2 = year_exam2
        }
        else{
            year_exam2 = 0
        }
        if(year_book2){
            year_book2 = year_book2
        }
        else{
            year_book2 = 0
        }
        if(year_resitting2){
            year_resitting2 = year_resitting2
        }
        else{
            year_resitting2 = 0
        }
        if(year_entrance2){
            year_entrance2 = year_entrance2
        }
        else{
            year_entrance2 = 0
        }
        if(year_extra2){
            year_extra2 = year_extra2
        }
        else{
            year_extra2 = 0
        }
        if(year_discount2){
            year_discount2 = year_discount2
        }
        else{
            year_discount2 = 0
        }


        var year_tution3 = parseInt($('#year_tution3').val());
        var year_exam3 = parseInt($('#year_exam3').val());
        var year_book3 = parseInt($('#year_book3').val());
        var year_resitting3 = parseInt($('#year_resitting3').val());
        var year_entrance3 = parseInt($('#year_entrance3').val());
        var year_extra3 = parseInt($('#year_extra3').val());
        var year_discount3 = parseInt($('#year_discount3').val());
        var year_total3 = $('#year_total3').val();
        if(year_tution3){
            year_tution3 = year_tution3
        }
        else{
            year_tution3 = 0
        }
        if(year_exam3){
            year_exam3 = year_exam3
        }
        else{
            year_exam3 = 0
        }
        if(year_book3){
            year_book3 = year_book3
        }
        else{
            year_book3 = 0
        }
        if(year_resitting3){
            year_resitting3 = year_resitting3
        }
        else{
            year_resitting3 = 0
        }
        if(year_entrance3){
            year_entrance3 = year_entrance3
        }
        else{
            year_entrance3 = 0
        }
        if(year_extra3){
            year_extra3 = year_extra3
        }
        else{
            year_extra3 = 0
        }
        if(year_discount3){
            year_discount3 = year_discount3
        }
        else{
            year_discount3 = 0
        }


        var year_tution4 = parseInt($('#year_tution4').val());
        var year_exam4 = parseInt($('#year_exam4').val());
        var year_book4 = parseInt($('#year_book4').val());
        var year_resitting4 = parseInt($('#year_resitting4').val());
        var year_entrance4 = parseInt($('#year_entrance4').val());
        var year_extra4 = parseInt($('#year_extra4').val());
        var year_discount4 = parseInt($('#year_discount4').val());
        var year_total4 = $('#year_total4').val();
        if(year_tution4){
            year_tution4 = year_tution4
        }
        else{
            year_tution4 = 0
        }
        if(year_exam4){
            year_exam4 = year_exam4
        }
        else{
            year_exam4 = 0
        }
        if(year_book4){
            year_book4 = year_book4
        }
        else{
            year_book4 = 0
        }
        if(year_resitting4){
            year_resitting4 = year_resitting4
        }
        else{
            year_resitting4 = 0
        }
        if(year_entrance4){
            year_entrance4 = year_entrance4
        }
        else{
            year_entrance4 = 0
        }
        if(year_extra4){
            year_extra4 = year_extra4
        }
        else{
            year_extra4 = 0
        }
        if(year_discount4){
            year_discount4 = year_discount4
        }
        else{
            year_discount4 = 0
        }

        if(no_of_year == 2){
            console.log("year 2")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,


                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_year == 3){
            console.log("year 3")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,

                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2,

                    'year_tution3' : year_tution3,
                    'year_exam3' : year_exam3,
                    'year_book3' : year_book3,
                    'year_resitting3' : year_resitting3,
                    'year_entrance3': year_entrance3,
                    'year_extra3': year_extra3,
                    'year_discount3': year_discount3,
                    'year_total3' : year_total3
                    
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }
        else if(no_of_year == 4){
            console.log("year 4")
            $.ajax({
                type: "POST",
                url: "{% url 'studentfees' %}",
                headers: { 'X-CSRFToken': '{{ csrf_token }}' },
                data: {
                    
                    'no_of_year':no_of_year,
                    "student":student,
                    'stream_year':stream_year,


                    'year_tution1' : year_tution1,
                    'year_exam1' : year_exam1,
                    'year_book1' : year_book1,
                    'year_resitting1' : year_resitting1,
                    'year_entrance1': year_entrance1,
                    'year_extra1': year_extra1,
                    'year_discount1': year_discount1,
                    'year_total1' : year_total1,

                    'year_tution2' : year_tution2,
                    'year_exam2' : year_exam2,
                    'year_book2' : year_book2,
                    'year_resitting2' : year_resitting2,
                    'year_entrance2': year_entrance2,
                    'year_extra2': year_extra2,
                    'year_discount2': year_discount2,
                    'year_total2' : year_total2,

                    'year_tution3' : year_tution3,
                    'year_exam3' : year_exam3,
                    'year_book3' : year_book3,
                    'year_resitting3' : year_resitting3,
                    'year_entrance3': year_entrance3,
                    'year_extra3': year_extra3,
                    'year_discount3': year_discount3,
                    'year_total3' : year_total3,

                    'year_tution4' : year_tution4,
                    'year_exam4' : year_exam4,
                    'year_book4' : year_book4,
                    'year_resitting4' : year_resitting4,
                    'year_entrance4': year_entrance4,
                    'year_extra4': year_extra4,
                    'year_discount4': year_discount4,
                    'year_total4' : year_total4

                    
                    
                    },
            success: function (res) {
                $('#year_output').empty()
                console.log(res)
                if(res.added == "yes"){
                    $('#year_output').append(`
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Record Updated Successfully</strong> 
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    `);
                }
                setTimeout(() => {
                    $('.alert').alert('close');
                }, 2000);
            }
        });
        }

    }
</script>




>>>>>>> 0afb1a7cdc5b133066f85bb3be6fd7c58409a049
{% endblock body %}